
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>19_data_prep_p1 - Do f"{X}" with Data</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#12-data-prep-part-1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Do f&#34;{X}&#34; with Data" class="md-header__button md-logo" aria-label="Do f"{X}" with Data" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Do f"{X}" with Data
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              19_data_prep_p1
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ramonpzg/rpg_content" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RPG_Content
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../setup/" class="md-tabs__link">
      Set Up
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../explanation/" class="md-tabs__link">
      Product
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../tutorials/" class="md-tabs__link">
      Data Engineering
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Data Analytics
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../how-to-guides/" class="md-tabs__link">
      Data Science
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../reference/" class="md-tabs__link">
      ML Engineering
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../explanation/" class="md-tabs__link">
      DevOps Engineering
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../explanation/" class="md-tabs__link">
      Software Dev
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../explanation/" class="md-tabs__link">
      DataViz
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Do f&#34;{X}&#34; with Data" class="md-nav__button md-logo" aria-label="Do f"{X}" with Data" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Do f"{X}" with Data
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ramonpzg/rpg_content" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RPG_Content
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        Set Up
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        Product
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        Data Engineering
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Data Analytics</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data Analytics" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Data Analytics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_jupyter_intro/" class="md-nav__link">
        01_jupyter_intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_python_installation/" class="md-nav__link">
        01_python_installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_anaconda_installation/" class="md-nav__link">
        02_anaconda_installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_types_vars/" class="md-nav__link">
        02_types_vars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_git_installation/" class="md-nav__link">
        03_git_installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_structures/" class="md-nav__link">
        03_structures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../04_tools/" class="md-nav__link">
        04_tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../05_control_flow/" class="md-nav__link">
        05_control_flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../06_terminal/" class="md-nav__link">
        06_terminal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../07_version_control/" class="md-nav__link">
        07_version_control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../08_intermediate_python/" class="md-nav__link">
        08_intermediate_python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09_numerical_computing/" class="md-nav__link">
        09_numerical_computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10_structured_data/" class="md-nav__link">
        10_structured_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11_getting_data/" class="md-nav__link">
        11_getting_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12_data_cleaning/" class="md-nav__link">
        12_data_cleaning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13_dataviz/" class="md-nav__link">
        13_dataviz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14_static_dataviz/" class="md-nav__link">
        14_static_dataviz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../15_interactive_dataviz/" class="md-nav__link">
        15_interactive_dataviz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../16_static_auctions/" class="md-nav__link">
        16_static_auctions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../17_interactive_airbnb/" class="md-nav__link">
        17_interactive_airbnb
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../18_stats_intro/" class="md-nav__link">
        18_stats_intro
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          19_data_prep_p1
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        19_data_prep_p1
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#12-data-prep-part-1" class="md-nav__link">
    12 Data Prep Part 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notebook-outline" class="md-nav__link">
    Notebook Outline
  </a>
  
    <nav class="md-nav" aria-label="Notebook Outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-project-definition" class="md-nav__link">
    1. Project Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-data-gathering" class="md-nav__link">
    2. Data Gathering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-1" class="md-nav__link">
    Exercise 1
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lets-now-pick-2-countries-and-a-city-wed-like-to-visit" class="md-nav__link">
    Let's now pick 2 countries and a city we'd like to visit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2" class="md-nav__link">
    Exercise 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-work-now-to-clean-and-reshape-our-data" class="md-nav__link">
    Awesome Work! Now to Clean and Reshape our Data!
  </a>
  
    <nav class="md-nav" aria-label="Awesome Work! Now to Clean and Reshape our Data!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-summary" class="md-nav__link">
    3. Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../20_data_prep_p2/" class="md-nav__link">
        20_data_prep_p2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../21_describing_data/" class="md-nav__link">
        21_describing_data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../22_eda/" class="md-nav__link">
        22_eda
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../README.md" class="md-nav__link">
        README
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../json_tutorial/" class="md-nav__link">
        json_tutorial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../read_json/" class="md-nav__link">
        read_json
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../how-to-guides/" class="md-nav__link">
        Data Science
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../reference/" class="md-nav__link">
        ML Engineering
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        DevOps Engineering
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        Software Dev
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        DataViz
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#12-data-prep-part-1" class="md-nav__link">
    12 Data Prep Part 1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notebook-outline" class="md-nav__link">
    Notebook Outline
  </a>
  
    <nav class="md-nav" aria-label="Notebook Outline">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-project-definition" class="md-nav__link">
    1. Project Definition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-data-gathering" class="md-nav__link">
    2. Data Gathering
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-1" class="md-nav__link">
    Exercise 1
  </a>
  
    <nav class="md-nav" aria-label="Exercise 1">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lets-now-pick-2-countries-and-a-city-wed-like-to-visit" class="md-nav__link">
    Let's now pick 2 countries and a city we'd like to visit
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2" class="md-nav__link">
    Exercise 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-work-now-to-clean-and-reshape-our-data" class="md-nav__link">
    Awesome Work! Now to Clean and Reshape our Data!
  </a>
  
    <nav class="md-nav" aria-label="Awesome Work! Now to Clean and Reshape our Data!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#3-summary" class="md-nav__link">
    3. Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/ramonpzg/rpg_content/edit/master/docs/analytics/19_data_prep_p1.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>19_data_prep_p1</h1>

<h2 id="12-data-prep-part-1">12 Data Prep Part 1<a class="headerlink" href="#12-data-prep-part-1" title="Permanent link">&para;</a></h2>
<blockquote>
<p>"Unless you try to do something beyond what you have already mastered, you will never grow.‚Äù ~ 
Ronald E. Osborn</p>
</blockquote>
<p><img alt="Mississippi river" src="https://i0.wp.com/www.firstinarchitecture.co.uk/wp-content/uploads/2018/04/Image-014.jpg?w=656&amp;ssl=1" /><br />
<strong>Source:</strong> Harold Norman Fisk</p>
<h2 id="notebook-outline">Notebook Outline<a class="headerlink" href="#notebook-outline" title="Permanent link">&para;</a></h2>
<ol>
<li>Project Definition</li>
<li>Data Gathering</li>
<li>Summary</li>
<li>Questions</li>
</ol>
<h3 id="1-project-definition">1. Project Definition<a class="headerlink" href="#1-project-definition" title="Permanent link">&para;</a></h3>
<p><img alt="solving" src="pictures/7.png" /></p>
<p>As data detectives, we want to make sure we have at least a loosly define outline of what our projects involving data might look like. In particular, we want to be extra careful with those involving large amounts of data since errors can, at the very least, be very time consuming and, at worst, expensive.</p>
<p>For our task, we are currently sick and tired of COVID and we want to start planning our next vacation. More specifically, we would love to scratch some countries off our bucket list, but, since this can be quite costly, we want to start by figuring out more information about the options we have, given the top 2, 4, 5, etc., countries we want to visit. In essence, we want to find the best deal possible given a set of criteria that we will polish as we explore the data further.</p>
<blockquote>
<p><strong>Project/Goal:</strong> To find the best place to stay at for our next vacation in terms of costs, venue, and things to do around it, given our top 3 destinations for 2021.</p>
<p><strong>Today we will cover:</strong> The grueling process of collecting and cleaning the data and then move on to Analysing the heck out of it.</p>
</blockquote>
<p>Since hotels are expensive, we thought we would give Airbnb a try. We found this awesome website called <a href="http://insideairbnb.com/about.html">Inside Airbnb</a> that has gathered a large amount of Airbnb data, and has made it publicly available for anyone to use and analyse to their heart's content. We will take advantage of this but, since we don't want to click and download every single file, one at a time, we will write some code to get us the data we need.</p>
<h3 id="2-data-gathering">2. Data Gathering<a class="headerlink" href="#2-data-gathering" title="Permanent link">&para;</a></h3>
<p><img alt="Gathering Data" src="pictures/9.png" /></p>
<p>We will be using data scraped from a scraping tool called, <a href="http://insideairbnb.com/index.html">Inside Airbnb</a>. Yes, we will be scraping a bit of data from the scraper itsef. More specifically, we will be taking the skeleton (an html version of the website), downloading it, and then extracting all of the links that will help us get the data from it.</p>
<p>We will start by importing the following packages to help us get the data we need.</p>
<ul>
<li><a href="https://docs.python.org/3/library/os.html"><code>os</code></a> --&gt; allows to interact with, and mofify, files within our operating system.</li>
<li><a href="https://pandas.pydata.org/"><code>pandas</code></a> --&gt; swiss army knife for data analysis in Python.</li>
<li><a href="https://numpy.org/"><code>numpy</code></a> --&gt; core module behind the swiss army knife, and overall, excellent tool for numerical computing in Python.</li>
<li><a href="https://requests.readthedocs.io/en/master/"><code>requests</code></a> --&gt; HTTP library for Python.</li>
<li><a href="https://www.crummy.com/software/BeautifulSoup/bs4/doc/"><code>bs4</code></a> --&gt; web scraping tool.</li>
<li><a href="https://pypi.org/project/wget/"><code>wget</code></a> --&gt; useful tool to download data with using Python.</li>
<li><a href="https://docs.python.org/3.8/library/glob.html"><code>glob</code></a> --&gt; excellent tool for finding and returning multiple files in your operating system using pattern matching (i.e. regex).</li>
<li><a href="https://docs.python.org/3.8/library/urllib.html"><code>urllib</code></a> --&gt; "urllib is a powerful, user-friendly HTTP client for Python" ~ <a href="https://docs.python.org/3.8/library/urllib.html">urllib</a></li>
<li><a href="https://dask.org/"><code>dask</code></a> --&gt; high performance computing module written in Python.</li>
</ul>
<p>Along the way, we will create different functions to help us avoid writing the same lines of code multiple times, and we will create multiple directories for our files to keep them neatly organised.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># in case you don&#39;t have the following 2 packages, make sure you run this cell</span>
<span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">beautifulsoup4</span> <span class="n">wget</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">wget</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">from</span> <span class="nn">glob</span> <span class="kn">import</span> <span class="n">glob</span>
<span class="kn">import</span> <span class="nn">urllib</span>

<span class="c1"># pandas by default only shows a few columns, we want them all!</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_columns</span> <span class="o">=</span> <span class="kc">None</span>

<span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span>
</code></pre></div></td></tr></table></div>
<p>Since we will be creating several directories, the first thing we will do is to assign a path to the directory where all of our data will go into and come out from.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;../data&#39;</span>

<span class="c1"># uncomment this one if you are using windows instead of a mac or linux</span>
<span class="c1"># path = &#39;..\data&#39; </span>
</code></pre></div></td></tr></table></div>
<p>We will also create a function that takes in an existing path as a starting point and many additional directory names that we might need/want to create along the way. In addition, our function will check whether the directory we are trying to create already exists, if not it will create one for each argument we pass into our function, then combine all arguments into one directory and return such directory.</p>
<p>You might have already seen the <code>*args</code> parameter often used inside a function in Python. What this does is that it gives us the ability to provide multiple arguments to a function without explicitely adding them to the construction of the function. It helps us save space and time while working. In addition, some of our functions will depend on this one function below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_or_add</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function will help us check whether one or more directories exists, and</span>
<span class="sd">    if they don&#39;t exist, it will create, combine, and return a new directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">old_path</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We will use Python's <code>requests</code> library to send a request to <strong>Inside Airbnb</strong>, then use our path creation function to add this HTML file to a directory called, <code>raw_files</code>, and then save the HTML skeleton file as text using a context manager construct. We will call our file <code>insideairbnb.html</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="err">?</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">path_4_source</span> <span class="o">=</span> <span class="n">check_or_add</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;raw_files&#39;</span><span class="p">)</span>
<span class="n">path_4_source</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">web_data</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://insideairbnb.com/get-the-data.html&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">web_data</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_4_source</span><span class="p">,</span> <span class="s1">&#39;insideairbnb.html&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">html</span><span class="p">:</span>
    <span class="n">html</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">web_data</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We will combine the path to our new file with the name of such file to a variable called <code>html_doc</code>. We will then read it back into the session, and parse the document using <code>BeautifulSoup</code>. We will assign our parsed file to a variable called <code>soup</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">html_doc</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path_4_source</span><span class="p">,</span> <span class="s1">&#39;insideairbnb.html&#39;</span><span class="p">)</span>
<span class="n">html_doc</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">html_doc</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span> 
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s1">&#39;html.parser&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><code>BeautifulSoup</code> will allow us to extract the links we need without much hassle. While we could figure out a way to get the exact links we need with a regular expression or a similar approach, we will extract all links at this stage by parsing the html file and taking out the links we need using pandas. For this, we will use a Python list comprehension and extract every hyperlink reference inside our parsed file.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">list_of_links</span> <span class="o">=</span> <span class="p">[</span><span class="n">link</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">link</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)]</span>
<span class="n">list_of_links</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We have </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">list_of_links</span><span class="p">)</span><span class="si">}</span><span class="s2"> links. Wow!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The files we need are those that end with <code>listings.csv.gz</code> and, to extract them, (or filter out the ones we don't want), we can take advantage many string methods available in the pandas library.</p>
<p>We will now convert our list into a pandas Series and assign it to a variable called <code>our_list</code>. You can think of this pandas Series as a 1 dimensional array with a visible, and very flexible, index. You can select elements from a pandas Series using its index in the same way you would do it with regular lists in Python, and you can also use diverse methods such as <code>.head()</code> and <code>.tail()</code> to examine the first or last 5 elements of an array, respectively.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># this is a pandas Series</span>
<span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># this is another pandas Series but this one has a name</span>
<span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;SciPy&#39;</span><span class="p">,</span> <span class="s1">&#39;Japan&#39;</span><span class="p">,</span> <span class="s1">&#39;2020&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;say_hi&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># select an index</span>
<span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">([</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;SciPy&#39;</span><span class="p">,</span> <span class="s1">&#39;Japan&#39;</span><span class="p">,</span> <span class="s1">&#39;2020&#39;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;say_hi&#39;</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_series</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;lots_of_numbers&#39;</span><span class="p">)</span>
<span class="n">toy_series</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>pandas Series' have a very useful functionality inherited from NumPy that allows us to filter its elements by a specific condition. This is often referred to as masking.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">condition1</span> <span class="o">=</span> <span class="p">(</span><span class="n">toy_series</span> <span class="o">&gt;</span> <span class="mi">30</span><span class="p">)</span>
<span class="n">condition1</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_series</span><span class="p">[</span><span class="n">condition1</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>We can also combine multiple operations with <code>&amp;</code> and <code>|</code> which stand for <code>and</code> and <code>or</code>, respectively.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">condition2</span> <span class="o">=</span> <span class="p">(</span><span class="n">toy_series</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">condition2</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_series</span><span class="p">[(</span><span class="n">condition1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">condition2</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
<p>Masks don't need to be passed in as variables but it certainly makes our code a bit cleaner and less error prone (this a completely unbiased opinion of course üòé).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_series</span><span class="p">[(</span><span class="n">toy_series</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">toy_series</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
<p>Now that we now a bit more about what a pandas Series is, let's continue working with the links from Inside Airbnb.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">list_of_links</span><span class="p">[:</span><span class="mi">15</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">our_list</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">list_of_links</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;links&#39;</span><span class="p">)</span>
<span class="n">our_list</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c1"># let&#39;s examine the first five rows of our new pandas Series</span>
</code></pre></div></td></tr></table></div>
<p>Let's check and see if we have any missing values before applying our string method to our pandas Series.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">our_list</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span>
<span class="nb">type</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Since we have a few missing values in our array, we will first get rid of them using pandas <code>.dopna()</code> method. We will then grab the listings links and filter out those links we don't want with a mask that tells pandas to grab only those files that end with <code>listings.csv.gz</code>. We will also reset the index just because it is nice to have values that start from 0 and go all the way to the end of our array.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">our_list</span><span class="o">.</span><span class="n">dropna</span><span class="err">?</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">our_list</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># drop NaN&#39;s and keep the changes</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">our_list</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="s1">&#39;classroom&#39;</span><span class="o">.</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">*</span> <span class="mi">100</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">condition</span> <span class="o">=</span> <span class="n">our_list</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;/listings.csv.gz&#39;</span><span class="p">)</span> <span class="c1"># let&#39;s find the listings we need</span>
<span class="n">condition</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">files_we_want</span> <span class="o">=</span> <span class="n">our_list</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># filter out what we don&#39;t need and reset the index</span>
<span class="n">files_we_want</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1"># make sure everything when through as expected</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have the links we need, let's go ahead and examine how many we have.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">files_we_want</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<p>That was a nice jump from 20k files all the way down to about 3k. That's still a lot of files to download, and will certainly be a lot of data (size-wise), so how about we have a look at how many files we have per country and, where possible, per city.</p>
<p>To get the countries available in our array, we will use another string method from pandas to split the urls by the <code>"/"</code>, and get the third element. If you notice in the 5 rows above, the 3rd element is the country the file belongs to. We will then use the pandas method <code>.unique()</code> to get all of the unique countries in the array.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="s1">&#39;This course is about Python&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;P&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">files_we_want</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">countries</span> <span class="o">=</span> <span class="n">files_we_want</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">countries</span>
</code></pre></div></td></tr></table></div>
<p>Notice that countries is another array with the same length as our original <code>files_we_want</code> pandas Series.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">unique_countries</span> <span class="o">=</span> <span class="n">countries</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">unique_countries</span>
</code></pre></div></td></tr></table></div>
<p>Let's now print the amount of files we have per country using a for loop. Since the variable <code>countries</code> has a pandas Sieries of the same length as the original <code>files_we_want</code> variable, we can use it as a mask to count unique countries when they are matched with the elements of our countries variable.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kc">True</span> <span class="o">+</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">sum</span><span class="p">(</span><span class="n">countries</span> <span class="o">==</span> <span class="s1">&#39;united-states&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="s1">&#39;this is a python course&#39;</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">unique_countries</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">country</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> has ------&gt; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_we_want</span><span class="p">[</span><span class="n">countries</span> <span class="o">==</span> <span class="n">country</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="exercise-1">Exercise 1<a class="headerlink" href="#exercise-1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Find out how many unique cities are represented in our dataset and add them to a list. Assign this list of unique cities to a variable called <code>unique_cities</code>. <strong>Hint:</strong> look at how we did this above for the countries.</p>
</li>
<li>
<p>Print the cities and how many files do we have for each using a for loop. üëÄ</p>
</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<p>Answers below! Don't peak! üëÄ</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">cities</span> <span class="o">=</span> <span class="n">files_we_want</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">unique_cities</span> <span class="o">=</span> <span class="n">cities</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">unique_cities</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">unique_cities</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> has ------&gt; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">files_we_want</span><span class="p">[</span><span class="n">cities</span> <span class="o">==</span> <span class="n">city</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="lets-now-pick-2-countries-and-a-city-wed-like-to-visit">Let's now pick 2 countries and a city we'd like to visit<a class="headerlink" href="#lets-now-pick-2-countries-and-a-city-wed-like-to-visit" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">my_country</span> <span class="o">=</span> <span class="s1">&#39;japan&#39;</span>
<span class="n">my_country2</span> <span class="o">=</span> <span class="s1">&#39;belgium&#39;</span>
<span class="n">my_city</span> <span class="o">=</span> <span class="s1">&#39;cape-town&#39;</span>
</code></pre></div></td></tr></table></div>
<p>The following is one of the most important functions in the whole notebook as it is the one that is going to allow us to download the data we need from Inside Airbnb.</p>
<p>The function takes in the following arguments:
- <code>urls</code> --&gt; This is strictly a pandas series with the list of urls we need
- <code>country_city</code> --&gt; This would the country or city you want to get data for
- <code>path_to_files</code> --&gt; This is where the data will be downloaded to
- <code>country_city_unique</code> --&gt; This is the iterable of unique countries or cities where Airbnb operates in
- <code>unique_num</code> --&gt; If you do not need all files available for <code>country_city</code>, you can specify how many you need. Default is all files</p>
<p>The function operates as follows:</p>
<ol>
<li>It first checks whether the country you have picked is in the list of unique countries</li>
<li>Then it creates a boolean array (aka a mask)</li>
<li>Passes it through our pandas series containing the urls to filter out the countries you don't need</li>
<li>Then it downloads the files you want and</li>
<li>Saves them into a new folder it creates called <code>raw_data</code> in the path you provided</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_me_specific_data</span><span class="p">(</span><span class="n">urls</span><span class="p">,</span> <span class="n">country_city</span><span class="p">,</span> <span class="n">path_to_files</span><span class="p">,</span> <span class="n">country_city_unique</span><span class="p">,</span> <span class="n">unique_num</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    urls: This is a pandas Series with the listings urls in it</span>
<span class="sd">    country_city: string with the name of the country or city you would like to get data from</span>
<span class="sd">    path_to_file: plain data foldet where the data will go to</span>
<span class="sd">    country_city_unique: interable with the unique countries or cities</span>
<span class="sd">    unique_num: Default None. If specified, it will download that amount of files</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">country_city</span> <span class="ow">in</span> <span class="n">country_city_unique</span><span class="p">:</span> <span class="c1"># we go over every country</span>

        <span class="n">condition</span> <span class="o">=</span> <span class="n">urls</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">country_city</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="c1"># check whether it exists in our list of urls and create a mask</span>
        <span class="n">data_we_need</span> <span class="o">=</span> <span class="n">urls</span><span class="p">[</span><span class="n">condition</span><span class="p">]</span> <span class="c1"># we pass that mask to our pandas series</span>
        <span class="n">new_dir</span> <span class="o">=</span> <span class="n">check_or_add</span><span class="p">(</span><span class="n">path_to_files</span><span class="p">,</span> <span class="n">country_city</span> <span class="o">+</span> <span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="s1">&#39;raw_data&#39;</span><span class="p">)</span> <span class="c1"># create a new directory for the raw data</span>

        <span class="k">if</span> <span class="n">unique_num</span><span class="p">:</span> <span class="c1"># we first check if a unique number of files was specified</span>

            <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">while</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="n">unique_num</span><span class="p">:</span> <span class="c1"># loop until we reach that point</span>

                <span class="k">try</span><span class="p">:</span> <span class="c1"># we first try to download the file with wget. if wget doesn&#39;t work, we try with urllib</span>
                    <span class="n">wget</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">data_we_need</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">num</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">country_city</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1">.csv.gz&#39;</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span> <span class="c1"># if urllib doesn&#39;t work, we move on to the next one</span>
                        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">data_we_need</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">num</span><span class="p">],</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">country_city</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1">.csv.gz&#39;</span><span class="p">))</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
                <span class="n">num</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>

            <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">data_we_need</span><span class="p">):</span> <span class="c1"># iterate over the links we want</span>

                <span class="k">try</span><span class="p">:</span> <span class="c1"># we first try to download the file with wget. if wget doesn&#39;t work, we try with urllib</span>
                    <span class="n">wget</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">country_city</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1">.csv.gz&#39;</span><span class="p">))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span> 
                        <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">new_dir</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">country_city</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">num</span><span class="si">}</span><span class="s1">.csv.gz&#39;</span><span class="p">))</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="k">continue</span>
</code></pre></div></td></tr></table></div>
<p>Let's put our new function to use and get the first batch of data we will be using. In honor to our host, we will be picking Japan as our first country,</p>
<p>When doing this on your own, here is a table with the countries, the amount of files available, the total size of the uncompressed and the compressed files, and the average size per file. The recommended way to pick a country and the amount of files you should download goes as follows:
1. Pick a reasonable GB size for your project (somewhere between 2 and 4 GB should be perfect to get started on your own).
2. Pick a country.
3. If the number of files in that country don't amount to the GB size you choose in step 1, pick another country or pick multiple countries until you have the desired amount of data.
4. If you want pick multiple countries but the total size of one or more of them is too large for what you think your computer can handle, divide the total GB size you need by the GB space you have left and that would be the amount of files you should to download.
5. Use the <code>get_me_specific_data()</code> function with the appropriate parameters and wait for a bit.</p>
<table>
<thead>
<tr>
<th align="left">Country</th>
<th align="left"># of Cities</th>
<th align="left"># of Files</th>
<th align="left">GB Size Compressed</th>
<th align="left">GB Size Decompressed</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">The-Netherlands</td>
<td align="left">1</td>
<td align="left">58</td>
<td align="left">851 M</td>
<td align="left">3.6 G</td>
</tr>
<tr>
<td align="left">Belgium</td>
<td align="left">3</td>
<td align="left">83</td>
<td align="left">245 M</td>
<td align="left">1.0 G</td>
</tr>
<tr>
<td align="left">United-States</td>
<td align="left">28</td>
<td align="left">859</td>
<td align="left">8.4 G</td>
<td align="left">35.0 G</td>
</tr>
<tr>
<td align="left">Greece</td>
<td align="left">4</td>
<td align="left">82</td>
<td align="left">902 M</td>
<td align="left">3.8 G</td>
</tr>
<tr>
<td align="left">Spain</td>
<td align="left">9</td>
<td align="left">259</td>
<td align="left">2.7 G</td>
<td align="left">12.0 G</td>
</tr>
<tr>
<td align="left">Australia</td>
<td align="left">7</td>
<td align="left">233</td>
<td align="left">2.6 G</td>
<td align="left">11.0 G</td>
</tr>
<tr>
<td align="left">China</td>
<td align="left">3</td>
<td align="left">57</td>
<td align="left">1.1 G</td>
<td align="left">4.9 G</td>
</tr>
<tr>
<td align="left">Belize</td>
<td align="left">1</td>
<td align="left">15</td>
<td align="left">38 M</td>
<td align="left">180 M</td>
</tr>
<tr>
<td align="left">Italy</td>
<td align="left">10</td>
<td align="left">246</td>
<td align="left">4.0 G</td>
<td align="left">16.0 G</td>
</tr>
<tr>
<td align="left">Germany</td>
<td align="left">2</td>
<td align="left">63</td>
<td align="left">894 M</td>
<td align="left">3.6 G</td>
</tr>
<tr>
<td align="left">France</td>
<td align="left">3</td>
<td align="left">117</td>
<td align="left">3.1 G</td>
<td align="left">13.0 G</td>
</tr>
<tr>
<td align="left">United-Kingdom</td>
<td align="left">5</td>
<td align="left">125</td>
<td align="left">2.7 G</td>
<td align="left">11.0 G</td>
</tr>
<tr>
<td align="left">Argentina</td>
<td align="left">1</td>
<td align="left">14</td>
<td align="left">272 M</td>
<td align="left">1.1 G</td>
</tr>
<tr>
<td align="left">South-Africa</td>
<td align="left">1</td>
<td align="left">24</td>
<td align="left">452 M</td>
<td align="left">1.9 G</td>
</tr>
<tr>
<td align="left">Denmark</td>
<td align="left">1</td>
<td align="left">27</td>
<td align="left">505 M</td>
<td align="left">2.2 G</td>
</tr>
<tr>
<td align="left">Ireland</td>
<td align="left">2</td>
<td align="left">45</td>
<td align="left">550 M</td>
<td align="left">2.3 G</td>
</tr>
<tr>
<td align="left">Switzerland</td>
<td align="left">2</td>
<td align="left">86</td>
<td align="left">200 M</td>
<td align="left">858 M</td>
</tr>
<tr>
<td align="left">Turkey</td>
<td align="left">1</td>
<td align="left">25</td>
<td align="left">275 M</td>
<td align="left">1.2 G</td>
</tr>
<tr>
<td align="left">Portugal</td>
<td align="left">2</td>
<td align="left">56</td>
<td align="left">879 M</td>
<td align="left">3.7 G</td>
</tr>
<tr>
<td align="left">Mexico</td>
<td align="left">1</td>
<td align="left">16</td>
<td align="left">279 M</td>
<td align="left">1.1 G</td>
</tr>
<tr>
<td align="left">Canada</td>
<td align="left">7</td>
<td align="left">191</td>
<td align="left">1.4 G</td>
<td align="left">6.0 G</td>
</tr>
<tr>
<td align="left">Norway</td>
<td align="left">1</td>
<td align="left">26</td>
<td align="left">156 M</td>
<td align="left">663 M</td>
</tr>
<tr>
<td align="left">Czech-Republic</td>
<td align="left">1</td>
<td align="left">25</td>
<td align="left">317 M</td>
<td align="left">1.3 G</td>
</tr>
<tr>
<td align="left">Brazil</td>
<td align="left">1</td>
<td align="left">27</td>
<td align="left">731 M</td>
<td align="left">2.9 G</td>
</tr>
<tr>
<td align="left">Chile</td>
<td align="left">1</td>
<td align="left">5</td>
<td align="left">52 M</td>
<td align="left">232 M</td>
</tr>
<tr>
<td align="left">Singapore</td>
<td align="left">1</td>
<td align="left">16</td>
<td align="left">102 M</td>
<td align="left">516 M</td>
</tr>
<tr>
<td align="left">Sweden</td>
<td align="left">1</td>
<td align="left">25</td>
<td align="left">129 M</td>
<td align="left">561 M</td>
</tr>
<tr>
<td align="left">Taiwan</td>
<td align="left">1</td>
<td align="left">25</td>
<td align="left">281 M</td>
<td align="left">1.1 G</td>
</tr>
<tr>
<td align="left">Japan</td>
<td align="left">1</td>
<td align="left">16</td>
<td align="left">248 M</td>
<td align="left">1.2 G</td>
</tr>
<tr>
<td align="left">Austria</td>
<td align="left">1</td>
<td align="left">52</td>
<td align="left">433 M</td>
<td align="left">1.8 G</td>
</tr>
</tbody>
</table>
<p>Let's now put our function to use and get the data we need for our project.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">get_me_specific_data</span><span class="p">(</span><span class="n">files_we_want</span><span class="p">,</span> <span class="n">my_country</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">unique_countries</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">get_me_specific_data</span><span class="p">(</span><span class="n">files_we_want</span><span class="p">,</span> <span class="n">my_country2</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">unique_countries</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">get_me_specific_data</span><span class="p">(</span><span class="n">files_we_want</span><span class="p">,</span> <span class="n">my_city</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">unique_cities</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We can check the data we have gathered so far to see if we got back what we wanted from Inside Airbnb.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">country1_raw_files</span> <span class="o">=</span> <span class="n">check_or_add</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">my_country</span> <span class="o">+</span> <span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="s1">&#39;raw_data&#39;</span><span class="p">)</span> <span class="c1"># let&#39;s add our new raw_data path to a variable</span>
<span class="n">country2_raw_files</span> <span class="o">=</span> <span class="n">check_or_add</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">my_country2</span> <span class="o">+</span> <span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="s1">&#39;raw_data&#39;</span><span class="p">)</span>
<span class="n">city_raw_files</span> <span class="o">=</span> <span class="n">check_or_add</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">my_city</span> <span class="o">+</span> <span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="s1">&#39;raw_data&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The function <code>os.listdir()</code> helps us see the files inside a directory/folder.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Amount of files we downloaded for </span><span class="si">{</span><span class="n">my_country</span><span class="si">}</span><span class="s2"> --&gt; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">country1_raw_files</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Amount of files we downloaded for </span><span class="si">{</span><span class="n">my_country2</span><span class="si">}</span><span class="s2"> --&gt; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">country2_raw_files</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Amount of files we downloaded for </span><span class="si">{</span><span class="n">my_city</span><span class="si">}</span><span class="s2"> --&gt; </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">city_raw_files</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Perfect, it seems like we got all of the files we wanted so let's look under the hood and examine one to see what we've got.</p>
<p>Since pandas has a <code>compression</code> parameter, we will not worry about decompressing our files with other tools and use a pandas DataFrame in the next few cells. You can think of a pandas DataFrame as many pandas Series combined into one data structure, or as a spreadsheet with rows and columns. You can also pass in Python dictionaries, two-dimensional lists and arrays, tuples, etc. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;column_A&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span>
                       <span class="s1">&#39;column_B&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
                       <span class="s1">&#39;column_C&#39;</span><span class="p">:</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">)})</span>
<span class="n">toy_df</span>
</code></pre></div></td></tr></table></div>
<p>You can access a pandas column using the same convention used when accessing specific keys from a dictionary. The result will be a pandas Series.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;column_A&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>All operations (or almost all) that can be done in a pandas Series can be done in a pandas DataFrame.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_df</span><span class="p">[</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;column_A&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_df</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="c1"># provides us with the mean of all three columns and moves the column names to the index</span>
</code></pre></div></td></tr></table></div>
<p>Now that we know a bit more about pandas DataFrames, let's continue and examine one of the many datasets we just downloaded.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">file_num</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># pick a number for the file you want to show.</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">my_country</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">country1_raw_files</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">my_country</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">file_num</span><span class="si">}</span><span class="s1">.csv.gz&#39;</span><span class="p">),</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span> 
                 <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">memory_usage</span><span class="o">=</span><span class="s1">&#39;deep&#39;</span><span class="p">)</span> <span class="c1"># this will tells us exactly how much space this dataset is occupying in our computer&#39;s memory</span>
</code></pre></div></td></tr></table></div>
<p>Notice how the previous random file has about 15k rows, 106 columns, and it has a decompressed size of ~160MB. Let's have a quick glance at the first few rows of the file with the <code>.head()</code> method.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>We have a ton of variables available so things will get very fun in the next part when we get to data cleaning.</p>
<p>Let's have a quick look at how many files we downloaded in total. To do this we will use the glob module, which is part of the starndard library of Python. Glob allows us use pattern matching to find files in one or many nested directories in our computer. For example, in the file path <code>my_data/*.csv</code>, the wildcard <code>*</code> will help us select all files, regardless of their names, that end up with <code>.csv</code>. In contrast, the <code>os.path.join()</code> below helps us connect different directories together regardless of the operating system.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">files</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;*_data&#39;</span><span class="p">,</span> <span class="s1">&#39;raw_data&#39;</span><span class="p">,</span> <span class="s1">&#39;*.csv.gz&#39;</span><span class="p">))</span>
<span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">),</span> <span class="n">files</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have a list of all of our files, we will create a function to help us decompress the files and save them as comma separated value fules (i.e. <code>CSV</code>).</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_csv_files</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">path_out</span><span class="p">,</span> <span class="n">new_dir</span><span class="p">,</span> <span class="n">country_city</span><span class="p">,</span> <span class="n">nums</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    data: the compressed file</span>
<span class="sd">    path_out: the directory all of our data for this project</span>
<span class="sd">    new_dir: new directory for the uncompressed files</span>
<span class="sd">    country_city: name of the country</span>
<span class="sd">    nums: number of files available</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="s1">&#39;gzip&#39;</span><span class="p">,</span>  <span class="n">low_memory</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="n">df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">check_or_add</span><span class="p">(</span><span class="n">path_out</span><span class="p">,</span> <span class="n">country_city</span> <span class="o">+</span> <span class="s1">&#39;_data&#39;</span><span class="p">,</span> <span class="n">new_dir</span><span class="p">),</span> 
                                        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">country_city</span><span class="si">}</span><span class="s1">_</span><span class="si">{</span><span class="n">nums</span><span class="si">}</span><span class="s1">.csv&#39;</span><span class="p">),</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Done Reading and Saving file </span><span class="si">{</span><span class="n">nums</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>It is time to introduce Dask to the session. In essence:</p>
<blockquote>
<p>"Dask provides advanced parallelism for analytics, enabling performance at scale for the tools you love" ~ <a href="https://dask.org/">dask.org</a></p>
</blockquote>
<p>One of the best features of Dask is that it allows you to scale regular Python code for data analysis to either fully use all of the resources in your machine or to scale your computations to a cluster of machines. Dask does this by integrating itself with some of the most well known tools in the data analytics domain such as pandas, NumPy, SciKit-Learn, its own dask bags which are great for processing large unstructured files, and many more. In addition, it allows you to create your own parallelised workflow with a useful function called <code>delayed()</code> that lazily starts building up a paralellised computational graph.</p>
<p>The <code>delayed</code> object is the dask functionality we will be taking advantage of to process all of our compressed files in parallel. </p>
<p>Let's go over a quick example inspired from one in Dask's own tutorials. Here, we will create a sleepy pemdas function. You might remember this order of operations from your high school days, where your math teacher would tell you that parentheses always come firt, followed by the exponents, then the multiplication, the division, the addition and the subtraction when doing operations. We will follow this pemdas order of operations with the pandas Series of a toy dataframe.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">os</span><span class="o">.</span><span class="n">cpu_count</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># first let&#39;s import the delayed function from dask</span>
<span class="kn">from</span> <span class="nn">dask</span> <span class="kn">import</span> <span class="n">delayed</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># let&#39;s create a toy dataframe for our computation</span>
<span class="n">toy_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
                       <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
                       <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]})</span>
<span class="n">toy_df</span>
</code></pre></div></td></tr></table></div>
<p>Here we have our functions. We are skipping the parentheses as we will test them all in different calls.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">exponents</span><span class="p">(</span><span class="n">a</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">**</span> <span class="mi">2</span>

<span class="k">def</span> <span class="nf">mult</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b</span> <span class="o">*</span> <span class="n">c</span> <span class="o">*</span> <span class="n">d</span>

<span class="k">def</span> <span class="nf">divide</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">d</span> <span class="o">/</span> <span class="n">e</span><span class="p">)</span> <span class="o">/</span> <span class="n">f</span>

<span class="k">def</span> <span class="nf">addition</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span> <span class="o">+</span> <span class="n">g</span> <span class="o">+</span> <span class="n">h</span>

<span class="k">def</span> <span class="nf">subtraction</span><span class="p">(</span><span class="n">h</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">h</span> <span class="o">-</span> <span class="n">i</span> <span class="o">-</span> <span class="n">j</span>
</code></pre></div></td></tr></table></div>
<p>We will first run these functions without using dask delayed and time it.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">ex</span> <span class="o">=</span> <span class="n">exponents</span><span class="p">(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">])</span>
<span class="n">ex1</span> <span class="o">=</span> <span class="n">exponents</span><span class="p">(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">])</span>
<span class="n">ex2</span> <span class="o">=</span> <span class="n">exponents</span><span class="p">(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">])</span>


<span class="n">mu</span> <span class="o">=</span> <span class="n">mult</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>

<span class="n">di</span> <span class="o">=</span> <span class="n">divide</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>

<span class="n">ad</span> <span class="o">=</span> <span class="n">addition</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">subtraction</span><span class="p">(</span><span class="n">mu</span><span class="p">,</span> <span class="n">di</span><span class="p">,</span> <span class="n">ad</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div></td></tr></table></div>
<p>As you can see, this operation takes about 7 seconds because each needs to sleep for one before advancing. Now, let compute and visualise the computation graph we are creating with dask.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">ex</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">exponents</span><span class="p">)(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">])</span>
<span class="n">ex1</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">exponents</span><span class="p">)(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">])</span>
<span class="n">ex2</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">exponents</span><span class="p">)(</span><span class="n">toy_df</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">])</span>

<span class="n">mu</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">mult</span><span class="p">)(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>
<span class="n">di</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">divide</span><span class="p">)(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>
<span class="n">ad</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">addition</span><span class="p">)(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ex1</span><span class="p">,</span> <span class="n">ex2</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">delayed</span><span class="p">(</span><span class="n">subtraction</span><span class="p">)(</span><span class="n">mu</span><span class="p">,</span> <span class="n">di</span><span class="p">,</span> <span class="n">ad</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">result</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>To evaluate what just happened, dask will create a directed acyclic graph for us that shows us the order in which the computations took place. In order to use this functionality, we need to have installed the <code>python-graphviz</code> module and the actual <a href="https://www.graphviz.org/">graphviz</a> tool.</p>
<p>First download the first command or go to graphviz website and use the appropriate download option for your operating system. Then procede to the second command.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># first command</span>
conda install -c conda-forge graphviz -y

<span class="c1"># second command</span>
pip install graphviz
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="n">graphviz</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">result</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h3 id="exercise-2">Exercise 2<a class="headerlink" href="#exercise-2" title="Permanent link">&para;</a></h3>
<ol>
<li>Create a pandas dataframe with fake data.</li>
<li>Create 2 functions that perform a computation on a different pandas Series of your dataframe each. Make your functions so that they sleep for 1 second.</li>
<li>Create 1 function that takes the outputof the previous two and return either an array or a single number. Make your functions so that they sleep for 1 second.</li>
<li>Evaluate the implementation of your functions <strong>without</strong> dask.delayed. Time it with <code>%%time</code> at the top of your cell.</li>
<li>Evaluate the implementation of your functions <strong>using</strong> dask.delayed. Time it with <code>%%time</code> at the top of your cell.</li>
<li>Compare both functions.</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># your 3 functions go here</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># First implementation goes here</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># delay your functions here</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>
<span class="c1"># test your delayed functions here</span>
</code></pre></div></td></tr></table></div>
<p>Now let's apply our <code>get_csv_files()</code> function using dask delayed to process the decompression of the files in a much faster manner.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">my_country</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">get_csv_files</span><span class="p">)(</span><span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">path_out</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">new_dir</span><span class="o">=</span><span class="s1">&#39;csv_files&#39;</span><span class="p">,</span> <span class="n">country_city</span><span class="o">=</span><span class="n">my_country</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">my_country2</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">get_csv_files</span><span class="p">)(</span><span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">path_out</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">new_dir</span><span class="o">=</span><span class="s1">&#39;csv_files&#39;</span><span class="p">,</span> <span class="n">country_city</span><span class="o">=</span><span class="n">my_country2</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">elif</span> <span class="n">my_city</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">get_csv_files</span><span class="p">)(</span><span class="n">data</span><span class="o">=</span><span class="n">file</span><span class="p">,</span> <span class="n">path_out</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">new_dir</span><span class="o">=</span><span class="s1">&#39;csv_files&#39;</span><span class="p">,</span> <span class="n">country_city</span><span class="o">=</span><span class="n">my_city</span><span class="p">,</span> <span class="n">nums</span><span class="o">=</span><span class="n">num</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">results</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Notice the delayed objects above. Since they have all been accumulated inside a list, we will use a list comprehentions to loop over them while computing the calculations.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="o">%%</span><span class="n">time</span>

<span class="n">results_done</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span> <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Double check that you have the correct amount of decompressed files with the cell below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">csv_files</span> <span class="o">=</span> <span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;*_data&#39;</span><span class="p">,</span> <span class="s1">&#39;csv_files&#39;</span><span class="p">,</span> <span class="s1">&#39;*.csv&#39;</span><span class="p">))</span>
<span class="nb">len</span><span class="p">(</span><span class="n">csv_files</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h2 id="awesome-work-now-to-clean-and-reshape-our-data">Awesome Work! Now to Clean and Reshape our Data!<a class="headerlink" href="#awesome-work-now-to-clean-and-reshape-our-data" title="Permanent link">&para;</a></h2>
<p><img alt="Cleaning" src="https://media.giphy.com/media/RjpE964WUAE5a/giphy.gif" /></p>
<h3 id="3-summary">3. Summary<a class="headerlink" href="#3-summary" title="Permanent link">&para;</a></h3>
<p>In this notebook we learned:</p>
<ol>
<li>How to think about the data analytics cycle.</li>
<li>How to form a project/idea/task.</li>
<li>To find the data we need and work around the inconsistencies that might arise in the process.</li>
<li>How to make directories/folders work with us.</li>
<li>How to manipulate 1-dimensional arrays using pandas Series, and 2-dimensional data structures using pandas dataframe.</li>
<li>To delay, and lazily compute operations using dask.</li>
</ol>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../18_stats_intro/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 18_stats_intro" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              18_stats_intro
            </div>
          </div>
        </a>
      
      
        
        <a href="../20_data_prep_p2/" class="md-footer__link md-footer__link--next" aria-label="Next: 20_data_prep_p2" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              20_data_prep_p2
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Ramon Perez
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/zillionare" target="_blank" rel="noopener" title="Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="mailto:code@jieyu.ai" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.tabs", "navigation.instant", "content.tabs.link", "toc.follow", "navigation.top"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>