
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>22 Exploratory Data Analysis - f"Do {X} with Data"</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#15-exploratory-data-analysis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="f&#34;Do {X} with Data&#34;" class="md-header__button md-logo" aria-label="f"Do {X} with Data"" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            f"Do {X} with Data"
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              22 Exploratory Data Analysis
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="red" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ramonpzg/rpg_content" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RPG Content
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../setup/" class="md-tabs__link">
        Set Up
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../data_eng/" class="md-tabs__link">
        Data Engineering
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../programming/" class="md-tabs__link">
        Programming
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Data Analytics
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../how-to-guides/" class="md-tabs__link">
      Data Science
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../explanation/" class="md-tabs__link">
      DataViz
    </a>
  </li>

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="f&#34;Do {X} with Data&#34;" class="md-nav__button md-logo" aria-label="f"Do {X} with Data"" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    f"Do {X} with Data"
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ramonpzg/rpg_content" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RPG Content
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../setup/">Set Up</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Set Up" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Set Up
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_python_installation.md" class="md-nav__link">
        Terminal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_python_installation.md" class="md-nav__link">
        Python Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_anaconda_installation.md" class="md-nav__link">
        Anaconda Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_git_installation.md" class="md-nav__link">
        03_git_installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_jupyter_intro.md" class="md-nav__link">
        01 Jupyter Intro
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../data_eng/">Data Engineering</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data Engineering" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Data Engineering
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../data_eng/06_terminal/" class="md-nav__link">
        Intro to Data Engineering
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../programming/">Programming</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Programming" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Programming
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/02_types_vars/" class="md-nav__link">
        02 Types Vars
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/03_structures/" class="md-nav__link">
        03 Data Structures
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/04_tools/" class="md-nav__link">
        04 Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/05_control_flow/" class="md-nav__link">
        05 Control Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/06_terminal/" class="md-nav__link">
        06 The Terminal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/07_version_control/" class="md-nav__link">
        07 Version Control
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../programming/08_intermediate_python/" class="md-nav__link">
        08 Intermediate Python
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Data Analytics</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data Analytics" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Data Analytics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../09_numerical_computing/" class="md-nav__link">
        09 Numerical Computing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10_structured_data/" class="md-nav__link">
        10 Structured Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11_getting_data/" class="md-nav__link">
        11 Getting Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../12_data_cleaning/" class="md-nav__link">
        12 Data Cleaning
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../13_dataviz/" class="md-nav__link">
        13 DataViz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../14_static_dataviz/" class="md-nav__link">
        14 Static Data Viz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../15_interactive_dataviz/" class="md-nav__link">
        15 Interactive DataViz
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../16_static_auctions/" class="md-nav__link">
        16 Case Study 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../17_interactive_airbnb/" class="md-nav__link">
        17 Case Study 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../18_stats_intro/" class="md-nav__link">
        18 Statistics Intro
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../19_data_prep_p1/" class="md-nav__link">
        19 Case Study 3 - Part 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../20_data_prep_p2/" class="md-nav__link">
        20 Case Study 3 - Part 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../21_describing_data/" class="md-nav__link">
        21 Describing Data
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          22 Exploratory Data Analysis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        22 Exploratory Data Analysis
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#15-exploratory-data-analysis" class="md-nav__link">
    15 Exploratory Data Analysis
  </a>
  
    <nav class="md-nav" aria-label="15 Exploratory Data Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notebook-outline" class="md-nav__link">
    Notebook Outline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-what-is-eda" class="md-nav__link">
    1. What is EDA?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-questions-to-explore" class="md-nav__link">
    2. Questions to Explore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-exploratory-data-analysis-stage" class="md-nav__link">
    3. Exploratory Data Analysis Stage
  </a>
  
    <nav class="md-nav" aria-label="3. Exploratory Data Analysis Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-a-bit-of-preparation" class="md-nav__link">
    3.1 A Bit of Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-exploratory-stage" class="md-nav__link">
    3.2 Exploratory Stage
  </a>
  
    <nav class="md-nav" aria-label="3.2 Exploratory Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#question-1" class="md-nav__link">
    Question 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-2" class="md-nav__link">
    Question 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-3" class="md-nav__link">
    Question 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-4" class="md-nav__link">
    Question 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-5" class="md-nav__link">
    Question 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-6" class="md-nav__link">
    Question 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-7" class="md-nav__link">
    Question 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-8" class="md-nav__link">
    Question 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-9" class="md-nav__link">
    Question 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-10" class="md-nav__link">
    Question 10
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-11" class="md-nav__link">
    Question 11
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-12" class="md-nav__link">
    Question 12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-13" class="md-nav__link">
    Question 13
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-14" class="md-nav__link">
    Question 14
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-15" class="md-nav__link">
    Question 15
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-dashboard" class="md-nav__link">
    4. Dashboard
  </a>
  
    <nav class="md-nav" aria-label="4. Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise_1" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-takeaways--reporting" class="md-nav__link">
    5. Takeaways / Reporting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-blind-spots" class="md-nav__link">
    6. Blind Spots
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-future-work" class="md-nav__link">
    7. Future work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-work" class="md-nav__link">
    Awesome Work!
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        index
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../how-to-guides/" class="md-nav__link">
        Data Science
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../explanation/" class="md-nav__link">
        DataViz
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#15-exploratory-data-analysis" class="md-nav__link">
    15 Exploratory Data Analysis
  </a>
  
    <nav class="md-nav" aria-label="15 Exploratory Data Analysis">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#notebook-outline" class="md-nav__link">
    Notebook Outline
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1-what-is-eda" class="md-nav__link">
    1. What is EDA?
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-questions-to-explore" class="md-nav__link">
    2. Questions to Explore
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-exploratory-data-analysis-stage" class="md-nav__link">
    3. Exploratory Data Analysis Stage
  </a>
  
    <nav class="md-nav" aria-label="3. Exploratory Data Analysis Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-a-bit-of-preparation" class="md-nav__link">
    3.1 A Bit of Preparation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-exploratory-stage" class="md-nav__link">
    3.2 Exploratory Stage
  </a>
  
    <nav class="md-nav" aria-label="3.2 Exploratory Stage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#question-1" class="md-nav__link">
    Question 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-2" class="md-nav__link">
    Question 2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-3" class="md-nav__link">
    Question 3
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-4" class="md-nav__link">
    Question 4
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-5" class="md-nav__link">
    Question 5
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-6" class="md-nav__link">
    Question 6
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-7" class="md-nav__link">
    Question 7
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-8" class="md-nav__link">
    Question 8
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-9" class="md-nav__link">
    Question 9
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-10" class="md-nav__link">
    Question 10
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-11" class="md-nav__link">
    Question 11
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-12" class="md-nav__link">
    Question 12
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-13" class="md-nav__link">
    Question 13
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-14" class="md-nav__link">
    Question 14
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#question-15" class="md-nav__link">
    Question 15
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-dashboard" class="md-nav__link">
    4. Dashboard
  </a>
  
    <nav class="md-nav" aria-label="4. Dashboard">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise_1" class="md-nav__link">
    Exercise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-takeaways--reporting" class="md-nav__link">
    5. Takeaways / Reporting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-blind-spots" class="md-nav__link">
    6. Blind Spots
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-future-work" class="md-nav__link">
    7. Future work
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#awesome-work" class="md-nav__link">
    Awesome Work!
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/ramonpzg/rpg_content/edit/master/docs/analytics/22_eda.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


  <h1>22 Exploratory Data Analysis</h1>

<h2 id="15-exploratory-data-analysis">15 Exploratory Data Analysis<a class="headerlink" href="#15-exploratory-data-analysis" title="Permanent link">&para;</a></h2>
<blockquote>
<p>“Most of the world will make decisions by either guessing or using their gut. They will be either lucky or wrong.” ~ Suhail Doshi</p>
<p>“There is nothing more deceptive than an obvious fact.” ~ (Sherlock Holmes) Arthur Conan Doyle</p>
</blockquote>
<p><img alt="eda" src="https://mir-s3-cdn-cf.behance.net/project_modules/fs/3db83c97871397.5ecf4f75da3b3.png" />  </p>
<p><strong>Source:</strong> <a href="https://www.behance.net/weiyi_1991c64f">New Retail Big Data Situation Awareness Screen by Zoe Shen</a></p>
<h3 id="notebook-outline">Notebook Outline<a class="headerlink" href="#notebook-outline" title="Permanent link">&para;</a></h3>
<ol>
<li>What is EDA?</li>
<li>Questions To Explore</li>
<li>Exploratory Data Analysis Stage<ul>
<li>A Bit of Data Prep</li>
<li>Exploratory Stage</li>
</ul>
</li>
<li>Dashboard</li>
<li>Takeaways / Reporting</li>
<li>Blind Spots</li>
<li>Future work</li>
</ol>
<h3 id="1-what-is-eda">1. What is EDA?<a class="headerlink" href="#1-what-is-eda" title="Permanent link">&para;</a></h3>
<p><img alt="gloabl_emission" src="https://mir-s3-cdn-cf.behance.net/project_modules/1400_opt_1/a199d32434363.5635ff285dc8d.jpg" /></p>
<p><strong>Source:</strong> <a href="https://www.behance.net/gallery/2434363/How-to-Reduce-CO2-Emission">Paulina Urbańska</a></p>
<p>Exploratory Data Analysis (EDA) is summarised in the name itself, it is an approach to data analysis where the goal is the exploration of the data and not necessarily hypothesis/model testing, although this can happen at this stage.</p>
<p><a href="https://en.wikipedia.org/wiki/Exploratory_data_analysis">Wikepedia, along with all of its cited sources,</a> has a great definition which in turn was derived from the work of late John Tukey, a well-known statistician who is considered the creator of EDA as a concept and approach to data analysis.</p>
<blockquote>
<p>In statistics, exploratory data analysis is an approach to analyzing data sets to summarize their main characteristics, often with visual methods. A statistical model can be used or not, but primarily EDA is for seeing what the data can tell us beyond the formal modeling or hypothesis testing task. Exploratory data analysis was promoted by John Tukey to encourage statisticians to explore the data, and possibly formulate hypotheses that could lead to new data collection and experiments. EDA is different from initial data analysis (IDA), which focuses more narrowly on checking assumptions required for model fitting and hypothesis testing, and handling missing values and making transformations of variables as needed. EDA encompasses IDA.</p>
</blockquote>
<p>Characteristics of EDA
- It allows us to spot further inconsistencies within the data after the preparation stage
- It helps us ask questions that expose facts about the data we have
- It allows us to see complex interactions within the data
- The visualisations at this stage are not necessarily meant to be publication-ready but rather quick and dirty constructs to asnwer questions from a different perspectives</p>
<h3 id="2-questions-to-explore">2. Questions to Explore<a class="headerlink" href="#2-questions-to-explore" title="Permanent link">&para;</a></h3>
<p><img alt="funny_question" src="https://imgs.xkcd.com/comics/questions.png" /><br />
<strong>Source:</strong> <a href="https://xkcd.com/1256/">xkcd.com</a></p>
<p>Here are the questions we will be exploring in this notebook. Before you head to the explanations, pause for a bit and think about how you would go about answering the following questions. Ask yourself, what kind of information would be most useful, which method/function and the like would be most appropriate to answer it? Should I visualise the answer as well?</p>
<ol>
<li>What does the distribution of our monetary columns look like?</li>
<li>What's the difference in the average price charged by super hosts versus the regular ones?</li>
<li>Do more bathrooms make a listing more expensive? 🛁 | 🚽</li>
<li>Do more rooms make a listing more expensive? </li>
<li>Does the availability of more beds make a listing more expensive? 🛏</li>
<li>Is there a noticeable price difference between room types offered by hosts? 🏘</li>
<li>Is there a noticeable price difference between room types that offer different quantities of beds in the listing? 🛏 + 🛏 != 🛏</li>
<li>How important is it that our host is a verified one? ✍🏽</li>
<li>Should we care whether the listings asks for a license or not?</li>
<li>Do we need Wifi, or can we be without it?</li>
<li>Reviews! How important are they in our decision to buy or not to buy? 🤔</li>
<li>Do we care about the cancellation policy?</li>
<li>What is the average price difference between getting a listing that can be booked instantly vs one that we cannot book it instantly?</li>
<li>What is the price difference between listings that charge a security deposit vs those that don't?</li>
<li>What does the average price between different property types look like?</li>
</ol>
<h2 id="3-exploratory-data-analysis-stage">3. Exploratory Data Analysis Stage<a class="headerlink" href="#3-exploratory-data-analysis-stage" title="Permanent link">&para;</a></h2>
<h3 id="31-a-bit-of-preparation">3.1 A Bit of Preparation<a class="headerlink" href="#31-a-bit-of-preparation" title="Permanent link">&para;</a></h3>
<p>You will need to install the following packages for this session. Once you install them, make sure you restart the notebook before you begin working on the lesson.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># !conda install -c pyviz holoviews panel bokeh -y</span>
<span class="c1"># !jupyter labextension install @pyviz/jupyterlab_pyviz</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">bokeh.plotting</span> <span class="kn">import</span> <span class="n">figure</span><span class="p">,</span> <span class="n">show</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="n">output_notebook</span>
<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">ColumnDataSource</span> <span class="c1"># similar to a pandas dataframe but specific for bokeh</span>
<span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">dodge</span> <span class="c1"># a helpful tool for placing bar charts close to each other</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">holoviews</span> <span class="k">as</span> <span class="nn">hv</span>
<span class="kn">from</span> <span class="nn">holoviews</span> <span class="kn">import</span> <span class="n">opts</span><span class="p">,</span> <span class="n">dim</span>


<span class="kn">import</span> <span class="nn">urllib</span> <span class="c1"># we will use this again to get more websites</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span> <span class="c1"># we will be looking at some Airbnb images</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span> <span class="c1"># for the images</span>

<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_columns</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">max_rows</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">pd</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">float_format</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span> <span class="c1"># reduce numbers to 4 decimals</span>
<span class="n">hv</span><span class="o">.</span><span class="n">extension</span><span class="p">(</span><span class="s1">&#39;bokeh&#39;</span><span class="p">)</span> <span class="c1"># holoviews will be using bokeh behind the scenes</span>

<span class="n">output_notebook</span><span class="p">()</span>

<span class="c1"># this magic command helps us to not reload our session every time we install a new package</span>

<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="o">%</span><span class="n">load_ext</span> <span class="n">autoreload</span> 
</code></pre></div></td></tr></table></div>
<p>Let's first add a variable with the path to where all of our data lives at. If yours is different than the one below, make sure you change the variable below to the correct path.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;../data&#39;</span>
</code></pre></div></td></tr></table></div>
<p>You can choose to read in the cleaned dataset in whichever format you prefer, CSV or parquet. Uncomment the one you prefer and continue on.</p>
<p><strong>Note:</strong> If you were not able to save your file in the parquet format at the end of the previous notebook, make sure you go back and install the packages at the end of the notebook before you run it again. For now, go on with your CSV file.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># csv file</span>
<span class="c1"># df = pd.read_csv(os.path.join(path, &#39;clean_csv&#39;, &#39;clean_airbnb.csv&#39;), parse_dates=True)</span>

<span class="c1"># parquet file</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_parquet</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;clean_parquet&#39;</span><span class="p">,</span> <span class="s1">&#39;clean_airbnb.parquet&#39;</span><span class="p">))</span>

<span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># let&#39;s quickly examine our data</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The first step we are going to take is to create a column that represents the real price per stay. You might wonder, what do we mean by the real price per stay, so here is a quick explanation for that. Airbnb is an online marketplace with buyers (us) and sellers (the hosts), and in the same way we have our own specifications regarding where we would like to stay, the hosts might also have their own specifications in regards to whom they rent their places to. Here are some characteristics we need to pay attention to when creating our real price column.</p>
<ul>
<li>The price is given per night</li>
<li>There is a cleaning fee which, if available, is not included in the price</li>
<li>The minimum amount of nights one can rent a listing for differs from country to country, and from listing to listing</li>
<li>There might be a security deposit we have to pay in advance</li>
</ul>
<p>The second step we are going to take is to start introducting our specifications to our analysis to narrow down the scope of our search. We will be traveling solo and even though our specifications will reflect this, each step of our process can also be extended to a much larger group of travelers.</p>
<p>Let's begin by creating our <code>min_price_per_stay</code> column by multiplying the <code>price</code> column by the <code>minimum_nights</code> column and then adding the <code>cleaning_fee</code> and <code>security_deposit</code> columns. We will check the data types of our variables first to make sure these are all numerical variables.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># let&#39;s make sure all of the columns we need are numerical</span>
<span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div></td></tr></table></div>
<p>Our <code>minimum_nights</code> column was not of a numerical type so we will convert to an integer column in the cell below.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># minimum_nights was not numerical so we will convert it to int32 with the .astype() method</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;minimum_nights&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;minimum_nights&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;minimum_nights&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># let&#39;s now create our true cost variable</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;min_price_per_stay&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;minimum_nights&#39;</span><span class="p">])</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cleaning_fee&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;security_deposit&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;min_price_per_stay&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Now, let's examine the differences between the columns we just used, first throughout the entire dataset, and then split by country using the pandas <code>describe()</code> and <code>.groupby()</code> methods to see what we have.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># select the columns we want</span>
<span class="n">money_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;cleaning_fee&#39;</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum_nights&#39;</span><span class="p">,</span> <span class="s1">&#39;min_price_per_stay&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># describe them to see what we have</span>
<span class="n">df</span><span class="p">[</span><span class="n">money_columns</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># now look at the distribution of these variables per country</span>
<span class="n">money_measures</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)[</span><span class="n">money_columns</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">money_measures</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<p>The first thing that should come to our attention is the fact that we have extremely low and high prices that, although we may have been able to deal with during the cleaning stage, they would have been difficult to spot without some analysis throughout that stage (and we would have peaked at the data too 👀). Nonetheless, since we know our budget quite well, max 1,500 USD for 2 weeks, we will go ahead and filter out the listings that don't match that criterion. In addition, since we know (or assume that) it is very unlikely to see free listings (a price of 0) in Airbnb, we will get rid of any listing that costs less than 40 USD per stay, as this is a reasonable amount for a minimum per night (you can pick another value if you'd like).</p>
<p>Let's create a max budget column by multiplying the <code>price</code> column by <code>14</code> and then adding the <code>cleaning_fee</code>. We will count on getting our deposit back so we will not include it in this particular variable.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">14</span> <span class="o">+</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;cleaning_fee&#39;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Now that we have our <code>two_weeks_price</code> we will create a low price condition to filter out prices less then <code>x</code> (<code>x</code> can be anything you'd like). We will also create a minimum amount of nights condition as we are going on a 2 week trip, nothing more, nothing less. Lastly, we will need a budget condition for our <code>two_weeks_price</code> variable that filters out anything over 1,500 USD, and then we will filter our data using these conditions.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># our minimum amount</span>
<span class="n">low_price_condition</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">40</span>
<span class="c1"># our highest amount</span>
<span class="n">budget_condition</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1500</span>
<span class="c1"># minimum amount of nights cannot be greater than 2 weeks</span>
<span class="n">nights_min_condition</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;minimum_nights&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">15</span>
<span class="c1"># let&#39;s filter our data</span>
<span class="n">df_budget</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">low_price_condition</span> <span class="o">&amp;</span> <span class="n">budget_condition</span> <span class="o">&amp;</span> <span class="n">nights_min_condition</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_budget</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<p>We should make sure there are no more <code>0</code> in the <strong>min</strong> index for the price column of our countries.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">money_measures</span> <span class="o">=</span> <span class="n">df_budget</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;country&#39;</span><span class="p">)[</span><span class="n">money_columns</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">money_measures</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<h3 id="32-exploratory-stage">3.2 Exploratory Stage<a class="headerlink" href="#32-exploratory-stage" title="Permanent link">&para;</a></h3>
<h4 id="question-1">Question 1<a class="headerlink" href="#question-1" title="Permanent link">&para;</a></h4>
<p>What does the distribution of our monetary columns look like? In other words, where are most of the prices at in relation to the most common vlues of our columns.</p>
<p>For this question we could use the pandas plotting functionality first, and then move on to making a bit more informative plots.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># plain pandas</span>
<span class="n">price_hist</span> <span class="o">=</span> <span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">bins</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
<span class="n">price_hist</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>We could also use the library we just imported, holoviews, with NumPy and create a nicer looking histograms. But, what is a histogram anyways? <a href="https://en.wikipedia.org/wiki/Histogram">Acording to Wikipedia</a> and their wonderful cited sources, a histogram is</p>
<blockquote>
<p>an approximate representation of the distribution of numerical data. It was first introduced by Karl Pearson. To construct a histogram, the first step is to "bin" (or "bucket") the range of values—that is, divide the entire range of values into a series of intervals—and then count how many values fall into each interval. The bins are usually specified as consecutive, non-overlapping intervals of a variable. The bins (intervals) must be adjacent and are often (but not required to be) of equal size.</p>
</blockquote>
<p>Awesome! How can we create one with holoviews and NumPy?</p>
<ol>
<li>Use <code>np.histogram()</code> to create 2 new arrays, one with the edges of the bins and another with the frequencies of the values within each edge. The function returns a tuple with 2 arrays so we will unpack the tuple into 2 variables.</li>
<li>Pass your two variables as a tuple with your <code>edges</code> first and the <code>frequencies</code> second, to the <code>hv.Histogram</code> function.</li>
<li>Evaluate your plot.</li>
</ol>
<p>Let's see how this works.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">frequencies</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">frequencies</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="c1"># first array</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">edges</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span> <span class="c1"># second array</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">hv</span><span class="o">.</span><span class="n">Histogram</span><span class="p">((</span><span class="n">edges</span><span class="p">,</span> <span class="n">frequencies</span><span class="p">))</span> <span class="c1"># our dataviz</span>
</code></pre></div></td></tr></table></div>
<p>It would be great if we could see all columns in one visualisation and have a widget to pick which column we'd like to see. Let's create just that.</p>
<p>First we will create a function that takes in a column, creates a numpy histogram based on the data and the column we have selected, and then create a holoviews histogram. Remember that <code>**kwargs</code> means any combination of key-value pairs that could be overwritten or added to a function. We will call our new function <code>load_currency</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">load_currency</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">frequencies</span><span class="p">,</span> <span class="n">edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">df_budget</span><span class="p">[</span><span class="n">column</span><span class="p">],</span> <span class="mi">50</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hv</span><span class="o">.</span><span class="n">Histogram</span><span class="p">((</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">edges</span><span class="p">))</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">framewise</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;hover&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">money_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;cleaning_fee&#39;</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">,</span> <span class="s1">&#39;minimum_nights&#39;</span><span class="p">,</span> <span class="s1">&#39;min_price_per_stay&#39;</span><span class="p">,</span> <span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>We will then use holoviews <code>DynamicMap</code> function as it allows us to map functions to the data to make interactive charts. The first argument is the plain function we just created and the second is the key dimension where the interactivity is coming from. In our case, this is our list of currency columns which will now be in a dropdown box for us to pick and choose. We will assign our new object to a variable called <code>dmap</code> and finish our visualisation by adding some options to the figure, mainly, height and width. The last step is to tell holoviews where these columns are coming from using the <code>.redim.values()</code> method. Note that <code>Money_Cols</code> is a name we came up with for the widget but it can be anything we'd like. All we need to do is to make sure that we use the same name for our kdims argument.</p>
<p><strong>Note:</strong> You could add more numerical variables to the list above and visualize even more histograms.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">dmap</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">DynamicMap</span><span class="p">(</span><span class="n">load_currency</span><span class="p">,</span> <span class="n">kdims</span><span class="o">=</span><span class="s1">&#39;Money_Cols&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">redim</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">Money_Cols</span><span class="o">=</span><span class="n">money_columns</span><span class="p">)</span>
<span class="n">dmap</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>That's an awesome visualisation and it allows us to evaluate the dispersion within our monetary columns more clearly. See if you can tweak the function and other parameters to come up with another cool visualization.</p>
<h4 id="question-2">Question 2<a class="headerlink" href="#question-2" title="Permanent link">&para;</a></h4>
<p>What's the difference in the average price charged by super hosts versus the regular ones? What would be the difference if we were to split it by country?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">price_super_diff</span> <span class="o">=</span> <span class="n">df_budget</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;host_is_superhost&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span>
<span class="p">)</span>
<span class="n">price_super_diff</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">price_super_diff</span><span class="p">[</span><span class="s1">&#39;t&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">price_super_diff</span><span class="p">[</span><span class="s1">&#39;f&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Not a big difference at all. Let's look at the same measure but by country now.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">q1</span> <span class="o">=</span> <span class="n">df_budget</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;host_is_superhost&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span>
<span class="p">)</span>
<span class="n">q1</span>
</code></pre></div></td></tr></table></div>
<p>As we can see, even though there are some instances where the regular hosts are more expensive than the super hosts, for the most part, super hosts seem to have slightly higher prices for a two week stay than the regular ones. Let's go ahead and visualize this.</p>
<p>We will first use <a href="https://docs.bokeh.org/en/latest/docs/user_guide/data.html">bokeh's ColumnDataSource object to create</a> a bokeh-specific dataframe. This makes it easier for bokeh to convert any specification to JavaScript code before creating and showing the plot for us. In addition, it not only allows us to share data between different plots but there are also bokeh objects/glyphs/models that will only interact with data coming from a <code>ColumnDataSource</code> frame. To use it we can pass in the full dataset or specify the pieces of a dataset we will need using a dictionary or a similar object. We will use the dictionary to reassign all of the pieces from our table above and add this to a variable called <code>source</code>.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">source</span> <span class="o">=</span> <span class="n">ColumnDataSource</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">countries</span><span class="o">=</span><span class="n">q1</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">super_host</span><span class="o">=</span><span class="n">q1</span><span class="o">.</span><span class="n">t</span><span class="p">,</span>
    <span class="n">regular_host</span><span class="o">=</span><span class="n">q1</span><span class="o">.</span><span class="n">f</span>
<span class="p">))</span>
</code></pre></div></td></tr></table></div>
<p>We will now create a bar chart with our data.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># create your figure</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">x_range</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">q1</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="c1"># the names or numbers to be used in the x axis</span>
           <span class="n">plot_height</span><span class="o">=</span><span class="mi">350</span><span class="p">,</span>
           <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Average Cost for a 2-week Stay per Country&quot;</span><span class="p">,</span>
           <span class="n">toolbar_location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tools</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="c1"># we won&#39;t be using any toolbars here but you can if you&#39;d like</span>

<span class="n">p</span><span class="o">.</span><span class="n">vbar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dodge</span><span class="p">(</span><span class="s1">&#39;countries&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.15</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">x_range</span><span class="p">),</span> <span class="c1"># dodge helps us separate the bars</span>
       <span class="n">top</span><span class="o">=</span><span class="s1">&#39;super_host&#39;</span><span class="p">,</span> 
       <span class="n">width</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="c1"># this is the width of the green bars</span>
       <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span> <span class="c1"># the data</span>
       <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#A3BE8C&quot;</span><span class="p">,</span> <span class="n">legend_label</span><span class="o">=</span><span class="s2">&quot;Super Host&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">vbar</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">dodge</span><span class="p">(</span><span class="s1">&#39;countries&#39;</span><span class="p">,</span>  <span class="mf">0.15</span><span class="p">,</span>  <span class="nb">range</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">x_range</span><span class="p">),</span> <span class="c1"># dodge helps us separate the bars</span>
       <span class="n">top</span><span class="o">=</span><span class="s1">&#39;regular_host&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">source</span><span class="p">,</span>
       <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#5E81AC&quot;</span><span class="p">,</span> <span class="n">legend_label</span><span class="o">=</span><span class="s2">&quot;Regular Host&quot;</span><span class="p">)</span>


<span class="n">p</span><span class="o">.</span><span class="n">x_range</span><span class="o">.</span><span class="n">range_padding</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># the space from the range of countries to the edges of the figure</span>
<span class="n">p</span><span class="o">.</span><span class="n">xgrid</span><span class="o">.</span><span class="n">grid_line_color</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1"># bars from each country to the top</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">320</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span> <span class="c1"># play with these numbers and see where you can place the legend at</span>
<span class="n">p</span><span class="o">.</span><span class="n">legend</span><span class="o">.</span><span class="n">orientation</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span> <span class="c1"># items are next to each other in the legend</span>

<span class="n">show</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>There doesn't seem to be a big difference between the prices charged by super hosts and regular hosts among the countries we picked. Let's keep exploring.</p>
<h4 id="question-3">Question 3<a class="headerlink" href="#question-3" title="Permanent link">&para;</a></h4>
<p>Do more bathrooms make a listing more expensive?</p>
<p>To answer this question, let's first plot the distribution of prices among the bathrooms available per listing.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bathrooms_group</span> <span class="o">=</span> <span class="n">df_budget</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">)</span>
<span class="n">bathrooms_group</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">rot</span><span class="o">=-</span><span class="mi">70</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>It seems as if listings with 7.5 bathrooms will give us the absolute best deal, right? Let's look at the frequencies of these listings first to see whether this is a true average of more than one value.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bathrooms_group</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<p>In effect, this average is not what we were expecting, but, we can explore further and see what's up with the ones with a lot of bathrooms and a relatively low price. Remember our image function?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">image_show</span><span class="p">(</span><span class="n">image_url</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">BytesIO</span><span class="p">(</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image_url</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bathroom_num</span> <span class="o">=</span> <span class="mf">7.5</span>
<span class="n">some_images</span> <span class="o">=</span> <span class="n">df_budget</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">bathroom_num</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;picture_url&#39;</span><span class="p">,</span> <span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]]</span>
<span class="n">some_images</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">image_show</span><span class="p">(</span><span class="n">some_images</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<p>Okay at least we know that we do not want to stay a place without a single bathroom, so we will remove observations without at least one bathroom and assign the resulting dataframe to a new variable.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bathroom_cond</span> <span class="o">=</span> <span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="c1"># we have to have bathrooms</span>
<span class="n">bathroom_cond</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_bath</span> <span class="o">=</span> <span class="n">df_budget</span><span class="p">[</span><span class="o">~</span><span class="n">bathroom_cond</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We reduced our search space by </span><span class="si">{</span><span class="n">df_budget</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> listings!!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-4">Question 4<a class="headerlink" href="#question-4" title="Permanent link">&para;</a></h4>
<p>Do more rooms make a listing more expensive on average? or, put in other words, what is the difference between prices in a listing with 0 or a few bedrooms versus a listing with (say) more than 5?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">room_num_group</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">)[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">room_num_group</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">room_num_group</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">room_num_group</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>We can't really compare averages here as the amount beds available in our dataset differs drastically, but there's still something useful to be said though. Let's look at the sorted values in decreasing order to see if we can spot the lowest prices of all. We'll create a function that takes in a dataframe, a column name, and a number to display after it sorts the array. We will then use our function in a for loop to print all of the variables.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sort_n_show</span><span class="p">(</span><span class="n">series</span><span class="p">,</span> <span class="n">col_to_sort</span><span class="p">,</span> <span class="n">n_toshow</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">series</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">col_to_sort</span><span class="p">)[</span><span class="n">col_to_sort</span><span class="p">][:</span><span class="n">n_toshow</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">room_num_group</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;This is the </span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2"> column&quot;</span><span class="p">)</span>
    <span class="n">sort_n_show</span><span class="p">(</span><span class="n">room_num_group</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Although 12 bedrooms seem to be the one with the overall lowest price (and the one that appears the most), we need to do some further digging to really be sure of any selection. Before we move on, let's have a look at our infamous cheap listing with 12 bedrooms.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_budget</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;picture_url&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">image_show</span><span class="p">(</span><span class="n">df_budget</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;picture_url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_budget</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_budget</span><span class="p">[</span><span class="s1">&#39;bedrooms&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">12</span><span class="p">,</span> <span class="s1">&#39;description&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>Ahhh! That makes sense now, the guest house is not necessarily commenting on a room per se but rather putting down information that belongs to both, the entire house and the rooms. Hence, this might be a bargain for such a low price. Let's keep exploring though.</p>
<h4 id="question-5">Question 5<a class="headerlink" href="#question-5" title="Permanent link">&para;</a></h4>
<p>What about the beds? Do we care about the amount of beds available within our listing, and/or is there a price difference between having more, none, or just 1? In other words, does the availability of more beds make a listing more expensive?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">beds_group</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;beds&#39;</span><span class="p">)[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">beds_group</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">prices_two</span> <span class="o">=</span> <span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">1498.2335</span>
<span class="n">beds_0</span> <span class="o">=</span> <span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;beds&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<span class="n">image_show</span><span class="p">(</span><span class="n">df_bath</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">prices_two</span> <span class="o">&amp;</span> <span class="n">beds_0</span><span class="p">,</span> <span class="s1">&#39;picture_url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">beds_group</span><span class="p">[</span><span class="s1">&#39;mean&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>While there is very little variation within the minimum price of a listing regardless of the amount of beds available, the median and mean tell a different story. As shown in the table and image above, while the minimum prices vary drastically, the mean and median do seem to be capturing the most commmon prices for x number of beds available in a listing. The oddball here was the number 22. We don't necessarily want to stay in a room with 22 beds if we don't have to so let's see what the image of that listing has to offer.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">bed_url</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;beds&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">22</span><span class="p">,</span> <span class="s1">&#39;picture_url&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">image_show</span><span class="p">(</span><span class="n">bed_url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>While this is the second time we see this listing with the super low price, and while it doesn't seem like that bad a deal to take, we'll continue exploring to see if we can find better offerings.</p>
<h4 id="question-6">Question 6<a class="headerlink" href="#question-6" title="Permanent link">&para;</a></h4>
<p>Is there a noticeable price difference between room types offered by hosts?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rooms</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;room_type&#39;</span><span class="p">)[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">rooms</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">roomba</span> <span class="o">=</span> <span class="n">rooms</span><span class="p">[[</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">roomba</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Here we can see that there are not that many differences between most of the prices per se but the n count differs drastically between room type, and the shared rooms seem to have the lowest price of all on average. Let's keep exploring.</p>
<h4 id="question-7">Question 7<a class="headerlink" href="#question-7" title="Permanent link">&para;</a></h4>
<p>Is there a noticeable average price difference between room types that offer different quantities of beds?</p>
<p>Let's create a dummy variable of three categories for no beds, 1 bed, or more beds. We will use a function alogside some if-else statements, and the apply it to every element in our beds column.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_a_dummy</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;One&quot;</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="s1">&#39;None&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;More than One&quot;</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;beds_dummy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s1">&#39;beds&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">get_a_dummy</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># applies a function to every element in a column</span>
<span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;beds_dummy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Let's create a slightly more complex groupby object and see how our <code>two_weeks_price</code> changes with our new categorical variables.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">rooms_and_beds</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="s1">&#39;beds_dummy&#39;</span><span class="p">])[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">agg</span><span class="p">([</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="s1">&#39;median&#39;</span><span class="p">,</span> <span class="s1">&#39;max&#39;</span><span class="p">])</span>
<span class="n">rooms_and_beds</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<p>So we want at least one bed, and because of this, we will filter out those with no beds whatsoever.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_beds</span> <span class="o">=</span> <span class="n">df_bath</span><span class="p">[</span><span class="n">df_bath</span><span class="p">[</span><span class="s1">&#39;beds_dummy&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We reduced our search by </span><span class="si">{</span><span class="n">df_bath</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_beds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> listings!!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_beds</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-8">Question 8<a class="headerlink" href="#question-8" title="Permanent link">&para;</a></h4>
<p>How important is it that our host is a verified one? Should we stay with a host that has not been verified? Probably not, but let's see what we have in terms of prices.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_beds</span><span class="o">.</span><span class="n">host_identity_verified</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_beds</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;host_identity_verified&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;host_is_superhost&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;count&#39;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_beds</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;host_identity_verified&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;host_is_superhost&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Is it even possible to be a super host without being verified first? Apparently one can, but the verified ones are still cheaper. Let's go ahead and remove the hosts that have not been verified.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span> <span class="o">=</span> <span class="n">df_beds</span><span class="p">[</span><span class="n">df_beds</span><span class="p">[</span><span class="s1">&#39;host_identity_verified&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;t&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;We reduced our search by </span><span class="si">{</span><span class="n">df_beds</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">df_verified</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> listings!!&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-9">Question 9<a class="headerlink" href="#question-9" title="Permanent link">&para;</a></h4>
<p>Should we care whether the listings asks for a license or not?</p>
<p>We don't have a license for either of this countries and your intructor, personally, does not have one at all (although he is a great driver nontheless 😎 + 🚗 = 🙌🏼), but that does not mean we should get rid of the ones that require one since we technically don't know whether they mean an ID or an actual license. In addition, we might be getting rid of a lot of obsevations that we would not want to get rid of in the first place. Let's examine this variable.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="o">.</span><span class="n">requires_license</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;requires_license&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span> <span class="s1">&#39;cleaning_fee&#39;</span><span class="p">],</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>It seems upon first inspection the price for our stay is cheaper with hosts that don't require a lisence. Let's see the rest of the story by country.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;requires_license&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>In effect, if we get rid of the listings that do require a lisence (which might be the hosts saying you need an ID), we would be getting rid of all listings in Japan and we don't want that to happen.</p>
<h4 id="question-10">Question 10<a class="headerlink" href="#question-10" title="Permanent link">&para;</a></h4>
<p>Do we need Wifi, or can we be without it?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="p">[</span><span class="s1">&#39;amenities&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">wifi_yes</span> <span class="o">=</span> <span class="n">df_verified</span><span class="o">.</span><span class="n">amenities</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Wifi&#39;</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">wifi_yes</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">hot_water</span> <span class="o">=</span> <span class="n">df_verified</span><span class="o">.</span><span class="n">amenities</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;Washer&#39;</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">hot_water</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_verified</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<p>We won't have service and would hate to miss any important information regarding any activity we might have scheduled ahead of time. Because of this, we will have to take out the places that do not include Wifi.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_wifi</span> <span class="o">=</span> <span class="n">df_verified</span><span class="p">[</span><span class="n">wifi_yes</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_wifi</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-11">Question 11<a class="headerlink" href="#question-11" title="Permanent link">&para;</a></h4>
<p>Reviews! How important are they in our decision to rent or not to rent? 🤔</p>
<p>Let's look at the distribution first.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_wifi</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_wifi</span><span class="p">[</span><span class="s1">&#39;number_of_reviews&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Review columns are informative but we need to make sure there are no reviews equal to 0 before we examine the next ones. That way we can actually explore them.</p>
<p>Let's extract the reviews columns.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">review_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">df_wifi</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span> <span class="k">if</span> <span class="s1">&#39;review_scores&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
<span class="n">review_cols</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">reviews_condition</span> <span class="o">=</span> <span class="n">df_wifi</span><span class="p">[</span><span class="s1">&#39;number_of_reviews&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span> <span class="c1"># condition for no reviews</span>
<span class="n">yes_reviews</span> <span class="o">=</span> <span class="n">df_wifi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">reviews_condition</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># dataset with reviews</span>
<span class="n">no_reviews</span> <span class="o">=</span> <span class="n">df_wifi</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">reviews_condition</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="c1"># dataset without reviews</span>
<span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;number_of_reviews&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">(),</span> <span class="n">no_reviews</span><span class="p">[</span><span class="s1">&#39;number_of_reviews&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">yes_reviews</span><span class="p">[</span><span class="n">review_cols</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">yes_reviews</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;room_type&#39;</span><span class="p">])[</span><span class="n">review_cols</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">T</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">revs_price</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;review_scores_rating&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">yes_reviews</span><span class="p">)</span>
<span class="n">revs_price</span><span class="p">;</span>
</code></pre></div></td></tr></table></div>
<p>Notice how the story changes when we split by room. We know we don't want to spend a fortune with this trip, but we are also aware that a bad pick could be detrimental to our stay. So, since we rather err on the cautious side, let's pick a cut off point for the reviews that makes sense to us.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">clean</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_cleanliness&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">9</span>
<span class="n">rating</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_rating&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">85</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_value&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">8</span>
<span class="n">accuracy</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_accuracy&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">9</span>
<span class="n">checkin</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_checkin&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">7.5</span>
<span class="n">comms</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_communication&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">8</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="p">[</span><span class="s1">&#39;review_scores_location&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">8.5</span>
<span class="n">rating</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_revs</span> <span class="o">=</span> <span class="n">yes_reviews</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">clean</span> <span class="o">&amp;</span> <span class="n">rating</span> <span class="o">&amp;</span> <span class="n">value</span> <span class="o">&amp;</span> <span class="n">accuracy</span> <span class="o">&amp;</span> <span class="n">checkin</span> <span class="o">&amp;</span> <span class="n">comms</span> <span class="o">&amp;</span> <span class="n">location</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_revs</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_revs</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-12">Question 12<a class="headerlink" href="#question-12" title="Permanent link">&para;</a></h4>
<p>Do we care about the cancellation policy?</p>
<p>Since it is an expensive trip, it is important to at least account for last minute emergencies and be sure that we can recuperate at least some of our money.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_revs</span><span class="o">.</span><span class="n">cancellation_policy</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_revs</span><span class="o">.</span><span class="n">cancellation_policy</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">super_strict</span> <span class="o">=</span> <span class="n">df_revs</span><span class="p">[</span><span class="s1">&#39;cancellation_policy&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;super_strict_30&#39;</span>
<span class="n">super_less_strict</span> <span class="o">=</span> <span class="n">df_revs</span><span class="p">[</span><span class="s1">&#39;cancellation_policy&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;strict_14_with_grace_period&#39;</span>

<span class="n">df_cancellation</span> <span class="o">=</span> <span class="n">df_revs</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">super_strict</span> <span class="o">&amp;</span> <span class="n">super_less_strict</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">df_cancellation</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div></td></tr></table></div>
<p>Since emergencies don't happen 14 days in advance, maybe, we will got rid of the two very strict cancellation policies and are down to about 1000 listings.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_cancellation</span><span class="o">.</span><span class="n">country</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<h4 id="question-13">Question 13<a class="headerlink" href="#question-13" title="Permanent link">&para;</a></h4>
<p>What is the average price difference between getting a listing that can be booked instantly vs one that we cannot book it instantly?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_cancellation</span><span class="o">.</span><span class="n">instant_bookable</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">money_columns</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_cancellation</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;instant_bookable&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="n">money_columns</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Prices don't seem to be too one-sided when it comes to the speed at which one can book the listing, because of this, we will not worry about this measure.</p>
<h4 id="question-14">Question 14<a class="headerlink" href="#question-14" title="Permanent link">&para;</a></h4>
<p>What is the price difference between listings that charge a security deposit vs those that don't?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># let&#39;s see the count difference first</span>
<span class="n">deposit</span> <span class="o">=</span> <span class="n">df_cancellation</span><span class="p">[</span><span class="s1">&#39;security_deposit&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Require a deposit - </span><span class="si">{</span><span class="n">df_cancellation</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="o">~</span><span class="n">deposit</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Does not require a deposit - </span><span class="si">{</span><span class="n">df_cancellation</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">deposit</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_cancellation</span><span class="p">[</span><span class="o">~</span><span class="n">deposit</span><span class="p">]</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;country&#39;</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">],</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Overall, the average security deposit fee varies drastically and Belgium seems to be the country with the highest deposit fee on average. Prices per country don't seem to vary much in Entire home/apt but they do vary a bit in a Private room.</p>
<h4 id="question-15">Question 15<a class="headerlink" href="#question-15" title="Permanent link">&para;</a></h4>
<p>What does the average price between different property types look like?</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">df_cancellation</span><span class="o">.</span><span class="n">pivot_table</span><span class="p">(</span>
    <span class="n">index</span><span class="o">=</span><span class="s1">&#39;property_type&#39;</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">loft</span> <span class="o">=</span> <span class="n">df_cancellation</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_cancellation</span><span class="p">[</span><span class="s1">&#39;property_type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Hostel&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;picture_url&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">]]</span>
<span class="n">loft</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">28</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">image_show</span><span class="p">(</span><span class="n">loft</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
<h3 id="exercise">Exercise<a class="headerlink" href="#exercise" title="Permanent link">&para;</a></h3>
<p>Come up with 5 questions to help you narrow the search to at most 100 listings.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<h2 id="4-dashboard">4. Dashboard<a class="headerlink" href="#4-dashboard" title="Permanent link">&para;</a></h2>
<p><img alt="dashboard" src="http://materialdesignblog.com/wp-content/uploads/2015/05/energy_mix.gif" /><br />
<strong>Source:</strong> <a href="http://materialdesignblog.com/10-material-design-concepts-of-captivating-data-visualization/">Material Design Blog</a></p>
<p>We will now go over several of the many ways in which we can create a dashboard in Python. We will use the library panel for this. Here is the description of Panel from its website,</p>
<blockquote>
<p>Panel is an open-source Python library that lets you create custom interactive web apps and dashboards by connecting user-defined widgets to plots, images, tables, or text. ~ <a href="https://panel.holoviz.org/index.html">HoloViz Team</a></p>
</blockquote>
<p>What is a dashboard anyways?</p>
<ul>
<li>A dashboard is a tool for summarizing critical or general information about a multitude of things that involve data</li>
<li>In business dashboards are used as graphical user interfaces to show the performance of a company from different angles</li>
<li>At a research center or market research firm, dashboards are used to explore data interactively</li>
<li>Dashboards display important statistics found in a dataset</li>
<li>Dashboards are used to enhance the viewers experience and ability to see more than one piece of information at a time</li>
</ul>
<p>In the words of data visualisation expert, <a href="http://www.stephen-few.com/">Steven Few</a></p>
<blockquote>
<p>"A dashboard is a visual display of the most important information needed to achieve one or more objectives; consolidated and arranged on a single screen so the information can be monitored at glance.”</p>
</blockquote>
<p>Now that we now what a dashboard is, let's talk about how to build one with Python.</p>
<ul>
<li>Load your libraries</li>
<li>Load your data</li>
<li>Sketch out what you need to build</li>
<li>Select a type, interactive or static</li>
<li>Select the appropriate chart for the information you would like to display</li>
<li>Choose an appropriate color</li>
<li>If it is interactive, build a function that returns your visual as an object</li>
<li>If it is static assign your visual to a variable</li>
<li>Build the blocks/components of your dashboard into a shape that makes sense for you, e.g. rows, columns, both, none</li>
<li>the list goes on ...</li>
</ul>
<p>Let's import Panel and a few other functions we will need. A few things to note about Panel first</p>
<ol>
<li>Panel has 3 main components: <strong>Pane, Widget, and Panel</strong></li>
<li>Almost anything can go into a <strong>Panel</strong> (e.g. markdown, visualisations, images, tables, etc.)</li>
<li><strong>Widgets</strong> provide us with interactivity</li>
<li><strong>Pane</strong>'s can be any element, addition or subtraction for a Panel or dashboard</li>
<li>The convention for importing Panel is <code>pn</code></li>
<li><code>pn.extension()</code> allows us to build interactive objects in the notebook</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">panel</span> <span class="k">as</span> <span class="nn">pn</span>
<span class="kn">from</span> <span class="nn">bokeh.transform</span> <span class="kn">import</span> <span class="n">factor_cmap</span><span class="p">,</span> <span class="n">factor_mark</span>
<span class="kn">from</span> <span class="nn">bokeh.palettes</span> <span class="kn">import</span> <span class="n">brewer</span>

<span class="n">pn</span><span class="o">.</span><span class="n">extension</span><span class="p">()</span> <span class="c1"># setting panel extension from the start allows us to create interactive object in the notebook</span>
</code></pre></div></td></tr></table></div>
<p>Let's create the title of one of our dashboards. Note that we can write markdown text in a piece of string that will go into panel.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;# A Place to Stay</span><span class="se">\n</span><span class="s2">This dashboard has information found in three places we wish to stay at during our next vacation: South Africa, Japan, and Belgium&quot;</span>
<span class="n">text</span>
</code></pre></div></td></tr></table></div>
<p>We will now use our two visualisations from earlier to create a small dashboard.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span><span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">p</span><span class="p">),</span> <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">25</span><span class="p">),</span> <span class="n">dmap</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Let's talk about what just happened.</p>
<ul>
<li><code>pn.Row()</code> allows us to pass in visualisations, plain or markdown text, and other Panel options row-wise</li>
<li><code>pn.Column()</code> does the same as <code>pn.Row()</code> but column-wise</li>
<li><code>pn.Spacer</code> allows us to put space in between our visualisations</li>
</ul>
<p>Let's create an informative plot. We will plot the price per night against the amount of bathrooms in our dataset, and split each point by the <code>room_type</code> column and increase the size of the plots by the amount of beds in that listing. In addition, because our prices vary drastically, we will transform our price variable to a logarithmic scale, this means that the prices will be in the scale of 10 to the power of 1, 2, 3, and so forth. The benefit of doing this is that it allows us to better observe variables that have values very spread out.</p>
<p><strong>Note</strong> that we are using a sample of our entire dataset from earlier.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">listings_types</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">room_type</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
<span class="n">MARKERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hex&#39;</span><span class="p">,</span> <span class="s1">&#39;circle_x&#39;</span><span class="p">,</span> <span class="s1">&#39;triangle&#39;</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">]</span>  <span class="c1"># you can pick any markers you want from bokeh</span>
<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#5E81AC&#39;</span><span class="p">,</span> <span class="s1">&#39;#EBCB8B&#39;</span><span class="p">,</span> <span class="s1">&#39;#A3BE8C&#39;</span><span class="p">,</span> <span class="s1">&#39;#B48EAD&#39;</span><span class="p">]</span> <span class="c1"># these colors belong to Nord</span>

<span class="n">bottom_left</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Prices, Bathrooms, and Rooms&quot;</span><span class="p">,</span> 
                     <span class="n">x_axis_label</span><span class="o">=</span><span class="s1">&#39;Bathrooms&#39;</span><span class="p">,</span> 
                     <span class="n">y_axis_label</span><span class="o">=</span><span class="s1">&#39;Price 4 Our Stay&#39;</span><span class="p">,</span> 
                     <span class="n">y_axis_type</span><span class="o">=</span><span class="s2">&quot;log&quot;</span>
<span class="p">)</span>

<span class="n">bottom_left</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="s2">&quot;price&quot;</span><span class="p">,</span> 
                    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;bathrooms&quot;</span><span class="p">,</span> 
                    <span class="n">source</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> 
                    <span class="n">legend_field</span><span class="o">=</span><span class="s2">&quot;room_type&quot;</span><span class="p">,</span> <span class="c1"># our legend will have our 4 room types</span>
                    <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="c1"># the points will be a bit transparent</span>
                    <span class="n">size</span><span class="o">=</span><span class="s1">&#39;beds&#39;</span><span class="p">,</span> <span class="c1"># they points size will increase by the amount of beds available in that listing</span>
                    <span class="n">marker</span><span class="o">=</span><span class="n">factor_mark</span><span class="p">(</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">MARKERS</span><span class="p">,</span> <span class="n">listings_types</span><span class="p">),</span> <span class="c1"># we map the markers to the room types</span>
                    <span class="n">color</span><span class="o">=</span><span class="n">factor_cmap</span><span class="p">(</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">listings_types</span><span class="p">)</span> <span class="c1"># we map the colors to the room types</span>
<span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">bottom_left</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We will now proceed to create a sankey diagram with part of the process we have followed so far in the EDA stage. A Sankey diagram is an acyclical flow chart where the width of a line represents the proprotion of the values that flow from the source (e.g. a characteristic of feature in our data) to the target (e.g. the next characteristic or feature we mapped the source to). For the values we can use whichever measure we wish to have flowing through the diagram (e.g. prices, reviews, etc.). In essence, to create a Sankey diagram with holoviews we need the <strong>source</strong>, a <strong>target</strong>, and the <strong>values</strong>. The source and the target can be any 2 characteristics you want to see a measure flow from and to.</p>
<p>To create these three measures (source, target, and the values), we will use pandas groupby to create a multilevel index where the source is the first level, the target is the second, and the values will be represented by whichever measure we aggregate by--our <code>two_weeks_price</code> in our case.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">edges1</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="s1">&#39;host_is_superhost&#39;</span><span class="p">])[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># first flow</span>
<span class="n">edges2</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;host_is_superhost&#39;</span><span class="p">,</span> <span class="s1">&#39;country&#39;</span><span class="p">])[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># second flow</span>
<span class="n">edges3</span> <span class="o">=</span> <span class="n">df_bath</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;country&#39;</span><span class="p">,</span> <span class="s1">&#39;cancellation_policy&#39;</span><span class="p">])[</span><span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># third flow</span>

<span class="n">datasets</span> <span class="o">=</span> <span class="p">[</span><span class="n">edges1</span><span class="p">,</span> <span class="n">edges2</span><span class="p">,</span> <span class="n">edges3</span><span class="p">]</span> <span class="c1"># list of smaller datasets to concatenate</span>

<span class="k">for</span> <span class="n">dt</span> <span class="ow">in</span> <span class="n">datasets</span><span class="p">:</span> 
    <span class="n">dt</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="c1"># change the column names of all three datasets</span>

<span class="n">edges</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">datasets</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># combine all three</span>
<span class="n">edges</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We are now ready to create our Sankey diagram. Luckily, Holoviews has abstracted most of the heavy lifting for us and all we need to do is to pass our new dataframe and a title to the <code>hv.Sankey()</code> function of Holoviews. As with most tools in Holoviews, we can add some options to the diagram such as, the position of the labels, the color of the target, the node color, and where to choose these colors from.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">sankey</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">Sankey</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Progression of Analysis&#39;</span><span class="p">)</span>
<span class="n">sankey</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">label_position</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span> <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;tab20&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<h3 id="exercise_1">Exercise<a class="headerlink" href="#exercise_1" title="Permanent link">&para;</a></h3>
<p>Using the same schema from above, try to add one or more layers to another Sankey diagram. Use a different variable name for it.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>
</code></pre></div></td></tr></table></div>
<p>We are always interested in the distributions of our variables, especially the distributions of combined variables. With that in mind, let's examine the distribution of beds within the different kinds of properties in our listing.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">boxwhisker</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">BoxWhisker</span><span class="p">(</span><span class="n">df_bath</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="c1"># our data</span>
                           <span class="s1">&#39;property_type&#39;</span><span class="p">,</span> <span class="c1"># our x axis</span>
                           <span class="s1">&#39;beds&#39;</span><span class="p">,</span> <span class="c1"># our y axis</span>
                           <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Distribution of Beds per property Type&quot;</span> <span class="c1"># our title</span>
                          <span class="p">)</span>

<span class="n">boxwhisker</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="c1"># don&#39;t show a legend, the x axis has the titles already</span>
                <span class="n">height</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> 
                <span class="n">width</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> 
                <span class="n">box_fill_color</span><span class="o">=</span><span class="s1">&#39;property_type&#39;</span><span class="p">,</span> <span class="c1"># color the boxes by the property type</span>
                <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;tab20&#39;</span><span class="p">,</span> <span class="c1"># color to choose from</span>
                <span class="n">xrotation</span><span class="o">=</span><span class="mi">70</span> <span class="c1"># rotate the labels of the axes</span>
               <span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Panel can take any object we pass through it, this includes images, blocks of color, etc. Hence, our dashboard can have almost anything we want to add to it. Let's start with a picture.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">png</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">panel</span><span class="p">(</span><span class="s1">&#39;https://www.clicdata.com/wp-content/uploads/2019/07/blog-difference-bi-dataviz-data-analytics.png&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">125</span><span class="p">)</span>
<span class="n">png</span>
</code></pre></div></td></tr></table></div>
<p>For the second dashboard we will create will use the <code>GridSpec()</code> function from Panel. As the name implies, it is a tool that allows us to create a grid full of objects to be displayed as a dashboard. The grid can be extended and contracted as necessary and to place objects in a specific spot we can assign elements in the same fashion in which we assigned elements to our NumPy matrices, by slicing the matrix/grid and assigning the elements we want to each spot.</p>
<p>Lastly, we can save any Panel object with the <code>.save()</code> function. We can save our dashboard as an HTML file and send/share it with anyone in an email, post, etc., or we can save it as a PNG, SVG, or JPEG file and share a snapshot of our dashboard.</p>
<p>Let's create our dashboard.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># first create a variable containing your GridSpec object</span>
<span class="c1"># sizing mode specifies if we want it expand and contract with different window sizes</span>
<span class="n">gspec</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">GridSpec</span><span class="p">(</span><span class="n">sizing_mode</span><span class="o">=</span><span class="s1">&#39;stretch_both&#39;</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="mi">800</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># first row and first column, some color</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">background</span><span class="o">=</span><span class="s1">&#39;#88C0D0&#39;</span><span class="p">)</span>

<span class="c1"># second row and first column, our picture from earlier</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">png</span>

<span class="c1"># third row and first column, our title for the dashboard</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>

<span class="c1"># first 2 rows and 2nd and 3rd columns, our boxplots</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">boxwhisker</span>

<span class="c1"># 4th and 5th rows and first column, our scatterplot</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">bottom_left</span>

<span class="c1"># 4th and 5th rows and 2nd and 3rd columns, our sankey diagram</span>
<span class="n">gspec</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">sankey</span>

<span class="c1"># show the plot or save it by uncommenting the .save() method</span>
<span class="n">gspec</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;testing_dashboard.html&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>We will now create an interactive dashboard using the following columns.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">money_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="s1">&#39;cleaning_fee&#39;</span><span class="p">,</span> <span class="s1">&#39;security_deposit&#39;</span><span class="p">,</span> <span class="s1">&#39;min_price_per_stay&#39;</span><span class="p">,</span> <span class="s1">&#39;two_weeks_price&#39;</span><span class="p">]</span>
<span class="n">some_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;bedrooms&#39;</span><span class="p">,</span> <span class="s1">&#39;beds&#39;</span><span class="p">,</span> <span class="s1">&#39;accommodates&#39;</span><span class="p">,</span> <span class="s1">&#39;guests_included&#39;</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
<p>One of the ways in which we create an interactive is by first creating functions that generate our desire plots and where the only argument we care about is the variable we want to see change. Here are the steps.</p>
<ol>
<li>Create a list, or lists, of variables you want to see change</li>
<li>Create a function that generates your plot and takes as an argument the variable(s) you want to see changing</li>
<li>Create one or two variables using <code>pn.widgets.Select()</code>, pass as arguments<ul>
<li>value - the starting variable from your list</li>
<li>options - the list of variables you want to choose from with your plot</li>
<li>name (optional) - a name for such variable</li>
</ul>
</li>
<li>On top of your plotting function(s) add what is called a decorator using <code>@pn.depends()</code><ul>
<li>Decorators in Python are functions that can be wrapped around another function and provide some additional functionality to it. Think about it as having ice cream and cone, we can eat the ice cream without the cone using a different base but cone will not serve the same purpose without any ice cream. In the same fashion, a decorator add to a function but doesn't necesarily work on it own</li>
<li>To <code>@pn.depends()</code> you will pass the values you want your function to change by using <code>var_name_you_picked.param.value</code></li>
</ul>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># the x axis will change by our list of features</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;bathrooms&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">some_features</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
<span class="c1"># the y axis will change by our monetary columns</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">widgets</span><span class="o">.</span><span class="n">Select</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;price&#39;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">money_columns</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>


<span class="nd">@pn</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># the decorators always go on top of the function and start with a @ sign</span>
<span class="k">def</span> <span class="nf">make_pbr_plot</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the same plot we created a bit ago but it is now inside a function</span>
<span class="sd">    and the only elements that will change are the x and y axes.</span>
<span class="sd">    When a variable changes, so will the title of our plot as well as the axes titles</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">listings_types</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Entire home/apt&#39;</span><span class="p">,</span> <span class="s1">&#39;Private room&#39;</span><span class="p">,</span> <span class="s1">&#39;Hotel room&#39;</span><span class="p">,</span> <span class="s1">&#39;Shared room&#39;</span><span class="p">]</span>
    <span class="n">MARKERS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;hex&#39;</span><span class="p">,</span> <span class="s1">&#39;circle_x&#39;</span><span class="p">,</span> <span class="s1">&#39;triangle&#39;</span><span class="p">,</span> <span class="s1">&#39;square&#39;</span><span class="p">]</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;#5E81AC&#39;</span><span class="p">,</span> <span class="s1">&#39;#EBCB8B&#39;</span><span class="p">,</span> <span class="s1">&#39;#A3BE8C&#39;</span><span class="p">,</span> <span class="s1">&#39;#B48EAD&#39;</span><span class="p">]</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">figure</span><span class="p">(</span><span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2">, and Rooms&quot;</span><span class="p">,</span> 
                 <span class="n">x_axis_label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
                 <span class="n">y_axis_label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">y</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1"> 4 Our Stay&#39;</span><span class="p">,</span> 
                 <span class="n">y_axis_type</span><span class="o">=</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>

    <span class="n">fig</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="n">legend_field</span><span class="o">=</span><span class="s2">&quot;room_type&quot;</span><span class="p">,</span> <span class="n">fill_alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s1">&#39;beds&#39;</span><span class="p">,</span>
          <span class="n">marker</span><span class="o">=</span><span class="n">factor_mark</span><span class="p">(</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">MARKERS</span><span class="p">,</span> <span class="n">listings_types</span><span class="p">),</span>
          <span class="n">color</span><span class="o">=</span><span class="n">factor_cmap</span><span class="p">(</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">listings_types</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">fig</span>


<span class="nd">@pn</span><span class="o">.</span><span class="n">depends</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">param</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># this function will only change the features of a listing</span>
<span class="k">def</span> <span class="nf">cat_whiskers</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Same function as before but by many features now</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Rooms and </span><span class="si">{</span><span class="n">x</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s2"> distribution&quot;</span>
    <span class="n">boxwhisker</span> <span class="o">=</span> <span class="n">hv</span><span class="o">.</span><span class="n">BoxWhisker</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">2000</span><span class="p">),</span> <span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
    <span class="n">boxwhisker</span><span class="o">.</span><span class="n">opts</span><span class="p">(</span><span class="n">show_legend</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">box_fill_color</span><span class="o">=</span><span class="s1">&#39;room_type&#39;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Set1&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">boxwhisker</span>
</code></pre></div></td></tr></table></div>
<p>The last piece of the puzzle is to use this functions to create a dashboard that shows the widget to interact with the variables and our two charts from before. We will arrange our dashboard in 3 rows where on will have 5 elements, another will be a bit of space between the charts, and the next will be our second chart.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># this is our dashboard</span>
<span class="n">child_1</span> <span class="o">=</span> <span class="n">pn</span><span class="o">.</span><span class="n">Row</span><span class="p">(</span> <span class="c1"># this creates our rows</span>
    <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s1">&#39;## Vars Explorer&#39;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">25</span><span class="p">),</span> <span class="n">cat_whiskers</span><span class="p">),</span> <span class="c1"># first element of our row has a column of 5 elements</span>
    <span class="n">pn</span><span class="o">.</span><span class="n">Spacer</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">25</span><span class="p">),</span> <span class="c1"># the 2nd element of our row has a bit of space for our charts</span>
    <span class="n">make_pbr_plot</span><span class="p">)</span> <span class="c1"># the 3rd element has our second chart</span>


<span class="n">child_1</span><span class="c1">#.save(&#39;example.html&#39;) # save it and share it with anyone : )</span>
</code></pre></div></td></tr></table></div>
<p>Lastly, panel also allows us to create multiple tabs that might contain anything we want. This includes dashboards, graphs, text, etc. You can add a name to each tab by passing a tuple where the first element is the name of the tab and the second is whatever you would like to display. Let's create one with two of our dashboards and the sankey diagram.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># initialise your object and pass in the tuples with the tab name and the onject you want to display.</span>
<span class="n">pn</span><span class="o">.</span><span class="n">Tabs</span><span class="p">(</span>
    <span class="p">(</span><span class="s1">&#39;Analysis&#39;</span><span class="p">,</span> <span class="n">child_1</span><span class="p">),</span> 
    <span class="p">(</span><span class="s1">&#39;Process&#39;</span><span class="p">,</span> <span class="n">pn</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="s2">&quot;# This is our Sankey Diagram&quot;</span><span class="p">,</span> <span class="n">sankey</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;Grid&#39;</span><span class="p">,</span> <span class="n">gspec</span><span class="p">)</span>

<span class="p">)</span><span class="c1">#.save(&#39;example2.html&#39;) # save it and share it with friends : )</span>
</code></pre></div></td></tr></table></div>
<h2 id="5-takeaways--reporting">5. Takeaways / Reporting<a class="headerlink" href="#5-takeaways--reporting" title="Permanent link">&para;</a></h2>
<p>Exploratory data analysis is fun and informative. It is a stage in which questions come and go, answers fly in and out, and we, in our way, shape up our knowledge of the data at hand. It is even more fun to do so with a dataset we are interested in, should we be doing it for a personal project, of course. So what have we learned about our quest for a good place to stay at thus far</p>
<ol>
<li>Prices can vary by many different factors such as beds and bathrooms available as well as the room type, and having a pre-defined set of measures to go by (e.g. budget, minimum requirements such as at least 1 bathroom and 1 bed) can help us stay more focused during the analysis</li>
<li>Reviews are important and can give us a general idea on what to expect from a listing</li>
<li>Don't take out variables or characteristic from within a variable (e.g. lisence) without knowing the context</li>
<li>Room type alongside our own pre-defined price measure, is one of the most important factors guiding our search</li>
</ol>
<p><strong>Remember our Goal</strong> - To find the best place to stay at for our next vacation in terms of costs, venue, and things to do around it, given our top 3 destinations for 2021.</p>
<p>Using the set of criteria chosen before our data analysis, we can continue narrowing down even further the space of options to choose from. It is now you turn to go from 1000 to 100 or less options to choose from. Don't forget to visualise them with our image function!</p>
<h2 id="6-blind-spots">6. Blind Spots<a class="headerlink" href="#6-blind-spots" title="Permanent link">&para;</a></h2>
<p>Here are some additional questions or key points we could have completed or think about throughout our analysis. </p>
<ol>
<li>We could have continued crosstabulating different variables together to spot diverese interactions within our data</li>
<li>We could have extracted more keywords from the listing description and even from the amenities variable</li>
<li>We could have explored the locations within our countries of choice further</li>
<li>Were there any price differences between the defferent amount of time hosts have been with Airbnb?</li>
<li>Even though we need Wifi for certain, we did not calculate the difference in prices between it and not having it</li>
</ol>
<h2 id="7-future-work">7. Future work<a class="headerlink" href="#7-future-work" title="Permanent link">&para;</a></h2>
<p>Here are some points we could explore and cover with further analysis.</p>
<ol>
<li>We could explore the actual reviews to gain more insight as to where the best place to stay at is. This would require the other datasets in <strong>Inside Airbnb</strong> and diving deep into Text Analytics</li>
<li>Some statistical modeling. We could have evaluated whether the differences in average prices given <strong>x</strong> measure were statistically significant or not</li>
<li>Geospatial analysis. Are the prices within one location significantly different from another?</li>
<li>This is a shareable notebook with an analysis using previously generated data, other options could have been to create an app that refreshes its data every time Inside Airbnb scrapes data from Airbnb</li>
</ol>
<h2 id="awesome-work">Awesome Work!<a class="headerlink" href="#awesome-work" title="Permanent link">&para;</a></h2>
<p><img alt="congrats" src="https://media.giphy.com/media/xUOrwiqZxXUiJewDrq/giphy.gif" /></p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../21_describing_data/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 21 Describing Data" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              21 Describing Data
            </div>
          </div>
        </a>
      
      
        
        <a href="../" class="md-footer__link md-footer__link--next" aria-label="Next: index" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              index
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 Ramon Perez
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://github.com/ramonpzg/rpg_content" target="_blank" rel="noopener" title="Github" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    <a href="mailto:ramonpzg01@gmail.com" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m20 8-8 5-8-5V6l8 5 8-5m0-2H4c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.tabs", "navigation.instant", "content.tabs.link", "toc.follow", "navigation.top"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>